
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier Interactif : 50 et +, Ton Exp√©rience est ton Super-pouvoir</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #003366;
            --success-color: #28a745;
            --action-color: #fd7e14;
            --info-color: #17a2b8;
            --light-bg: #f4f7f9;
            --white: #ffffff;
            --text-color: #343a40;
            --border-color: #dee2e6;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 100px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.8;
            margin: 0;
            padding-top: 80px;
            background-color: var(--light-bg);
            color: var(--text-color);
        }

        /* Images illustratives */
        .illustrative-banner {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 12px 12px 0 0;
            margin-bottom: -20px;
        }
        
        .module-illustration {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .top-bar {
            position: sticky;
            top: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            height: 70px;
            box-sizing: border-box;
        }
        
        .top-bar-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 15px;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .controls-cluster {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .controls { display: flex; gap: 15px; }
        .controls button, .button-like {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        #saveBtn { background-color: var(--success-color); color: var(--white); }
        #loadBtn { background-color: var(--info-color); color: var(--white); }
        #resetBtn { background-color: #dc3545; color: var(--white); }
        .controls button:hover, .button-like:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .save-status { margin-left: 20px; color: var(--success-color); font-weight: 600; opacity: 0; transition: opacity 0.5s; }

        .container { max-width: 1000px; margin: 30px auto; padding: 0 15px; }

        header {
            text-align: center;
            padding: 30px;
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        header h1 { color: var(--secondary-color); font-size: 2.6em; font-weight: 700; margin: 20px 0 0 0; position: relative; z-index: 1; }
        header p { font-size: 1.2em; color: var(--primary-color); font-weight: 300; position: relative; z-index: 1; }

        .module {
            background-color: var(--white);
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
        }
        
        .accordion-header {
            width: 100%;
            background: none;
            border: none;
            padding: 25px 30px;
            text-align: left;
            font-size: 2em;
            font-weight: 600;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
        }
        .accordion-header .icon { font-size: 1.5em; margin-right: 15px; }
        .accordion-header::after {
            content: '‚ñº';
            font-size: 0.6em;
            transition: transform 0.3s ease;
        }
        .module.active .accordion-header::after {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
            padding: 0 30px;
        }
        .module.active .accordion-content {
            max-height: 10000px; 
            overflow: visible;
            padding: 0 30px 30px 30px;
        }

        .module h3 { font-size: 1.5em; color: var(--primary-color); margin-top: 40px; }

        .info-box, .conseil-box, .action-box, .exemples-box, .practice-box { padding: 20px; margin: 25px 0; border-radius: 8px; border-left: 5px solid; }
        .info-box { background-color: #eef7ff; border-left-color: var(--info-color); }
        .conseil-box { background-color: #eaf6eb; border-left-color: var(--success-color); }
        .action-box { background-color: #fff8e1; border-left-color: var(--action-color); }
        .exemples-box { background-color: #f3e5f5; border-left-color: #8e44ad; }
        .practice-box { background-color: #e0f7fa; border-left-color: #00796b; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-card h4 {
            margin-top: 0;
            color: var(--secondary-color);
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        .stat-card p {
            font-size: 0.95em;
            color: #555;
            margin: 0;
        }
        .stat-highlight {
            font-weight: 700;
            color: var(--action-color);
        }

        /* Photo Langage Styles */
        .photo-langage-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 20px;
        }
        .suggested-photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }
        .suggested-photo {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 2px solid transparent;
        }
        .suggested-photo:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border-color: var(--primary-color);
        }
        .drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            background-color: #f8f9fa;
            transition: background-color 0.3s;
            margin-bottom: 10px;
        }
        .drop-zone:hover, .drop-zone.drag-over {
            background-color: #eef7ff;
            border-color: var(--primary-color);
        }
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .photo-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
        }
        .photo-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #eee;
        }
        .photo-card-content {
            padding: 15px;
        }
        .photo-card textarea {
            width: 100%;
            min-height: 60px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9em;
            resize: vertical;
            box-sizing: border-box;
        }
        .photo-card .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(220, 53, 69, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: background 0.2s;
        }
        .photo-card .delete-btn:hover {
            background: #c82333;
        }

        /* Video Library Styles */
        .video-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .video-input-group input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            min-width: 200px;
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .video-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        .video-card-footer {
            padding: 10px;
            text-align: center;
        }
        .video-card .delete-video-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #dc3545;
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .suggested-videos-list {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 15px;
            margin-top: 15px;
        }
        .suggested-video-item {
            flex: 0 0 200px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }
        .suggested-video-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .suggested-video-item img {
            width: 100%;
            height: 112px;
            object-fit: cover;
        }
        .suggested-video-item p {
            font-size: 0.85em;
            padding: 8px;
            margin: 0;
            background: white;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }


        /* Chart Styles */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            margin: 30px auto;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .transformation-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .transformation-table th, .transformation-table td { border: 1px solid var(--border-color); padding: 15px; text-align: left; vertical-align: top; }
        .transformation-table th { background-color: #e9ecef; color: var(--secondary-color); font-weight: 600; }
        .transformation-table strong { color: var(--secondary-color); }

        .slider-container { display: flex; align-items: center; gap: 15px; margin-top: 10px; }
        input[type="range"] { flex-grow: 1; -webkit-appearance: none; appearance: none; height: 8px; background: #ddd; border-radius: 5px; outline: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--primary-color); border-radius: 50%; cursor: pointer; }
        .slider-value { font-weight: 600; font-size: 1.2em; color: var(--primary-color); min-width: 30px; text-align: center; }

        .action-item, .checklist-item { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px; }
        .action-item input[type="checkbox"], .checklist-item input[type="checkbox"] { width: 20px; height: 20px; margin-top: 5px; flex-shrink: 0; }
        .action-item textarea, .practice-box textarea, #trainingFocus { width: 100%; min-height: 60px; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-family: 'Poppins', sans-serif; box-sizing: border-box; }
        .message-template { background-color: #eef; padding: 15px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word; }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 2000;
            display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
        }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background: white; padding: 40px; border-radius: 12px; text-align: center; box-shadow: 0 5px 25px rgba(0,0,0,0.2); width: 90%; max-width: 450px;
        }
        .modal-content h2 { color: var(--secondary-color); margin-top: 0; }
        .modal-content input[type="text"] { width: 80%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1em; margin: 15px 0 25px 0; }
        .modal-content button { padding: 12px 30px; border: none; border-radius: 8px; background-color: var(--primary-color); color: white; font-size: 1em; font-weight: 600; cursor: pointer; transition: background-color 0.3s; }
        
        #cvDropZone {
            border: 2px dashed var(--border-color); border-radius: 8px; padding: 20px; text-align: center;
            cursor: pointer; transition: background-color 0.3s, border-color 0.3s;
        }
        #cvDropZone.drag-over { background-color: #eef7ff; border-color: var(--primary-color); }
        #cvDropZone p { margin: 0; color: #6c757d; }
        
        .generated-cv-section {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 25px;
            margin-top: 40px;
        }
        .cv-template-container { 
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-top: 20px;
        }
        .cv-template { 
            border: 1px solid var(--border-color); 
            padding: 30px; 
            border-radius: 8px; 
            background: var(--white); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.07);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .cv-template:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .loading-spinner, .error-message { text-align: center; padding: 20px; font-style: italic; color: var(--text-color); }
        .error-message { color: #dc3545; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 5px; }

        .prompt-box {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            position: relative;
            display: none;
            border: 2px solid var(--primary-color);
        }
        .prompt-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            margin-bottom: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .prompt-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .prompt-label {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
            display: block;
            text-transform: uppercase;
            font-size: 0.8em;
            letter-spacing: 1px;
        }

        .drop-status {
            margin-top: 15px;
            padding: 12px;
            border-radius: 5px;
            font-size: 0.9em;
            text-align: center;
            display: none;
        }
        .drop-status.success {
            background-color: #eaf6eb;
            border: 1px solid #c3e6cb;
            color: #155724;
            display: block;
        }
        .drop-status.info {
            background-color: #eef7ff;
            border: 1px solid #b8daff;
            color: #004085;
            display: block;
        }

        .star-practice-container {
            margin-top: 30px;
            padding: 25px;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }
        .star-practice-row {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
        }
        .star-practice-row .input-group {
            flex: 1;
        }
        .star-practice-row label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        .star-practice-row textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
            resize: vertical;
        }
        .delete-row-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2em;
            line-height: 32px;
            text-align: center;
            flex-shrink: 0;
            transition: background-color 0.2s ease;
        }
        .delete-row-btn:hover {
            background: #c82333;
        }

        @media (max-width: 768px) {
             .top-bar-content {
                justify-content: center;
            }
            .star-practice-row {
                flex-direction: column;
                align-items: stretch;
            }
            .delete-row-btn {
                position: absolute;
                top: 5px;
                right: 5px;
                width: 28px;
                height: 28px;
                line-height: 28px;
                font-size: 1em;
            }
        }

        @media print {
            body { padding-top: 0; margin: 0; }
            .top-bar, .modal-overlay, .container > header, .module:not(.print-section), .accordion-header, .controls, .save-status { 
                display: none; 
            }
            .container { margin: 0; padding: 0; max-width: 100%;}
            .print-section { 
                display: block !important; 
                box-shadow: none; 
                border: none;
                margin: 0;
            }
            .print-section .accordion-content { 
                max-height: none; 
                padding: 0; 
                overflow: visible;
            }
            .print-section .cv-template { 
                border: none; 
                padding: 0; 
                box-shadow: none;
            }
            .print-section .cv-template button {
                display: none;
            }
        }

    </style>
</head>
<body>

    <div class="modal-overlay" id="nameModal">
        <div class="modal-content">
            <h2>Bienvenue dans votre atelier interactif !</h2>
            <p>Pour personnaliser votre exp√©rience, veuillez entrer votre pr√©nom.</p>
            <input type="text" id="userNameInput" placeholder="Votre pr√©nom">
            <button id="submitNameBtn">Commencer</button>
        </div>
    </div>

    <div class="top-bar">
        <div class="top-bar-content">
            <div class="controls-cluster">
                <div class="controls">
                    <button id="saveBtn" class="button-like">üíæ Sauvegarder</button>
                    <button id="loadBtn" class="button-like">üîÑ Charger</button>
                    <button id="resetBtn" class="button-like">üóëÔ∏è R√©initialiser</button>
                </div>
                <span class="save-status" id="saveStatus"></span>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <img src="https://placehold.co/1000x250/0056b3/ffffff?text=Atelier+Senior+:+Exp√©rience+et+Succ√®s" alt="Banni√®re atelier senior" class="illustrative-banner">
            <h1>Atelier Interactif : 50 et +</h1>
            <p>Transforme ton exp√©rience en ton plus grand atout strat√©gique.</p>
        </header>

        <main id="accordionContainer">
            <section id="module0" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module0">
                    <span id="welcome-title">Bienvenue ! Vos Objectifs...</span>
                </button>
                <div id="content-module0" class="accordion-content">
                    <p>Cet atelier est un espace pour vous r√©armer de confiance et d'outils concrets. Nous allons bien au-del√† du simple CV pour transformer votre perception de la recherche d'emploi.</p>
                    <ul style="list-style-type: '‚Ä¢ '; padding-left: 20px;">
                        <li><strong>Reprendre le Pouvoir :</strong> Cesser de subir les pr√©jug√©s pour devenir l'acteur principal de votre carri√®re.</li>
                        <li><strong>Ma√Ætriser votre Discours :</strong> Apprendre √† raconter votre histoire professionnelle de mani√®re percutante et positive.</li>
                        <li><strong>Identifier votre Valeur Ajout√©e Unique :</strong> Mettre en lumi√®re ce que vous seul(e) pouvez apporter √† une entreprise.</li>
                        <li><strong>Construire un Plan d'Action Personnalis√© :</strong> Repartir avec des √©tapes claires, r√©alisables et motivantes.</li>
                    </ul>
                </div>
            </section>

            <section id="moduleContext" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-moduleContext">
                    <span><span class="icon">üìä</span>Le Contexte Actuel : Pourquoi Votre Profil est Plus Pertinent que Jamais</span>
                </button>
                <div id="content-moduleContext" class="accordion-content">
                    <p>Avant de plonger dans les outils, il est essentiel de comprendre le terrain de jeu. Loin des id√©es re√ßues, les chiffres montrent une r√©alit√© encourageante et pleine d'opportunit√©s.</p>
                    
                    <img src="https://placehold.co/900x200/eaf6eb/28a745?text=Seniors+actifs+et+valoris√©s+en+entreprise" alt="Seniors en entreprise" class="module-illustration">

                    <div class="stats-grid">
                        <div class="stat-card" style="border-top-color: var(--success-color);">
                            <h4>Une force de travail en croissance</h4>
                            <p>Le taux d'emploi des 55-64 ans est pass√© de 32% en 2000 √† <span class="stat-highlight">56,9% en 2022</span>. Vous n'√™tes pas une exception, vous √™tes une part croissante et indispensable de l'√©conomie.</p>
                        </div>
                        
                        <div class="stat-card" style="border-top-color: var(--info-color);">
                            <h4>Une tendance de fond</h4>
                            <p>D'ici 2035, <span class="stat-highlight">50% de la population</span> en Europe aura plus de 45 ans. Les entreprises qui ignorent les talents seniors se privent de la moiti√© de leur vivier de comp√©tences.</p>
                        </div>
                        
                        <div class="stat-card" style="border-top-color: var(--action-color);">
                            <h4>Des atouts reconnus</h4>
                            <p>Une √©tude IPSOS r√©v√®le que recruteurs et candidats s'accordent sur les 3 atouts majeurs des seniors : <span class="stat-highlight">l'exp√©rience, l'expertise et l'autonomie</span>. Ce sont vos piliers.</p>
                        </div>
                    </div>

                    <div class="conseil-box" style="background-color: #eaf6eb; border-left-color: #28a745; display: flex; gap: 15px; align-items: center;">
                         <span style="font-size: 2em;">üí°</span>
                         <p style="margin: 0;"><strong>La conclusion ?</strong> Le march√© a besoin de vous. Notre mission aujourd'hui n'est pas de vous "vendre" malgr√© votre √¢ge, mais de vous aider √† articuler la valeur immense que votre parcours apporte.</p>
                    </div>
                </div>
            </section>

            <section id="modulePhotoLangage" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-modulePhotoLangage">
                    <span><span class="icon">üì∏</span>Photo-Langage : Se Raconter en Images</span>
                </button>
                <div id="content-modulePhotoLangage" class="accordion-content">
                    <p>Une image vaut mille mots. Utilisez cet espace pour choisir ou importer des photos qui illustrent <strong>votre personnalit√©</strong>, <strong>votre √©tat d'esprit actuel</strong>, ou <strong>votre vision de la place des seniors</strong>.</p>
                    <p><em>Cet outil vous aidera √† vous pr√©senter et √† briser la glace lors de l'atelier.</em></p>
                    
                    <div class="photo-langage-container">
                        <div class="photo-source-section">
                            <h4 style="color: var(--primary-color);">1. Inspiration : Choisissez parmi nos suggestions</h4>
                            <p style="font-size: 0.9em; color: #666;">Cliquez sur une image pour l'ajouter √† votre planche.</p>
                            <div class="suggested-photos-grid" id="suggestedPhotosGrid">
                                <img src="https://placehold.co/400x300/FF5733/ffffff?text=Activit√©+et+Joie" class="suggested-photo" data-desc="Activit√© et Joie" alt="Seniors actifs">
                                <img src="https://placehold.co/400x300/33FF57/ffffff?text=Sant√©+:+Soin+et+Exp√©rience" class="suggested-photo" data-desc="Sant√© : Soin et Exp√©rience" alt="Infirmi√®re senior">
                                <img src="https://placehold.co/400x300/3357FF/ffffff?text=Agriculture+:+Terre+et+Racines" class="suggested-photo" data-desc="Agriculture : Terre et Racines" alt="Agriculteur">
                                <img src="https://placehold.co/400x300/FF33A8/ffffff?text=Industrie+:+Pr√©cision+Technique" class="suggested-photo" data-desc="Industrie : Pr√©cision Technique" alt="Femme en usine">
                                <img src="https://placehold.co/400x300/A833FF/ffffff?text=M√©canique+:+Expertise+Manuelle" class="suggested-photo" data-desc="M√©canique : Expertise Manuelle" alt="M√©canicien">
                                <img src="https://placehold.co/400x300/33FFF5/ffffff?text=B√¢timent+:+B√¢tir+l'avenir" class="suggested-photo" data-desc="B√¢timent : B√¢tir l'avenir" alt="Ouvrier chantier">
                                <img src="https://placehold.co/400x300/FF8C33/ffffff?text=Logistique+:+Maillon+essentiel" class="suggested-photo" data-desc="Logistique : Maillon essentiel" alt="Logistique">
                                <img src="https://placehold.co/400x300/8CFF33/ffffff?text=Arm√©e+:+Service+et+Discipline" class="suggested-photo" data-desc="Arm√©e : Service et Discipline" alt="Militaire">
                                <img src="https://placehold.co/400x300/338CFF/ffffff?text=Commerce+:+Relation+Client" class="suggested-photo" data-desc="Commerce : Relation Client" alt="Vente">
                                <img src="https://placehold.co/400x300/FF338C/ffffff?text=Bureau+:+Comp√©tence+avant+tout" class="suggested-photo" data-desc="Bureau : Comp√©tence avant tout" alt="Femme en fauteuil roulant">
                                <img src="https://placehold.co/400x300/8C33FF/ffffff?text=Tech+:+Modernit√©+et+Style" class="suggested-photo" data-desc="Tech : Modernit√© et Style" alt="Femme tatou√©e tech">
                                <img src="https://placehold.co/400x300/33FF8C/ffffff?text=Services+:+L'indispensable" class="suggested-photo" data-desc="Services : L'indispensable" alt="Service nettoyage">
                                <img src="https://placehold.co/400x300/FF5733/ffffff?text=Leadership+:+Transmission" class="suggested-photo" data-desc="Leadership : Transmission" alt="R√©union √©quipe">
                                <img src="https://placehold.co/400x300/33FF57/ffffff?text=Administration+:+Rigueur" class="suggested-photo" data-desc="Administration : Rigueur" alt="Femme au bureau">
                                <img src="https://placehold.co/400x300/3357FF/ffffff?text=Nature+:+S√©r√©nit√©" class="suggested-photo" data-desc="Nature : S√©r√©nit√©" alt="Nature for√™t">
                                <img src="https://placehold.co/400x300/FF33A8/ffffff?text=D√©fis+:+Sommets" class="suggested-photo" data-desc="D√©fis : Sommets" alt="Montagne">
                            </div>
                        </div>

                        <div class="photo-upload-section">
                            <h4 style="color: var(--primary-color);">2. Ou importez vos propres images</h4>
                            <div id="photoDropZone" class="drop-zone">
                                <p style="margin:0;">Glissez une image ici ou <strong>cliquez pour s√©lectionner</strong> un fichier depuis votre appareil.</p>
                                <input type="file" id="photoUploadInput" accept="image/*" style="display:none">
                            </div>
                        </div>

                        <div class="photo-selection-section">
                            <h4 style="color: var(--action-color); border-bottom: 2px solid var(--action-color); display: inline-block; padding-bottom: 5px;">3. Ma S√©lection (Photo-Langage)</h4>
                            <p>D√©crivez pourquoi vous avez choisi ces images (un mot-cl√©, une √©motion, un argument contre un st√©r√©otype...).</p>
                            <div id="photoSelectionContainer" class="selection-grid">
                                <div style="grid-column: 1/-1; text-align: center; color: #999; padding: 20px; font-style: italic;" id="emptySelectionMsg">
                                    Aucune image s√©lectionn√©e pour le moment.
                                </div>
                            </div>
                        </div>

                        <div class="video-library-section">
                            <h4 style="color: #d35400; border-bottom: 2px solid #d35400; display: inline-block; padding-bottom: 5px;">4. Ma Biblioth√®que Vid√©o & Inspirations</h4>
                            <p>Constituez votre vid√©oth√®que : tutoriels, conf√©rences inspirantes, t√©moignages. Ajoutez des liens YouTube ou choisissez parmi nos suggestions.</p>
                            
                            <div class="video-input-group">
                                <input type="text" id="videoUrlInput" placeholder="Collez un lien YouTube ici (ex: https://www.youtube.com/watch?v=...)">
                                <button id="addVideoBtn" class="button-like" style="background-color: #d35400; color: white;">+ Ajouter la vid√©o</button>
                            </div>
                            
                            <div id="userVideoContainer" class="video-grid">
                                <div style="grid-column: 1/-1; text-align: center; color: #999; padding: 20px; font-style: italic;" id="emptyVideoMsg">
                                    Aucune vid√©o ajout√©e. Commencez par en ajouter une ou choisissez une suggestion ci-dessous.
                                </div>
                            </div>

                            <div class="video-suggestions" style="margin-top: 30px; background: #fff5f0; padding: 15px; border-radius: 8px;">
                                <h5 style="color: #d35400; margin-top: 0;">üì∫ Suggestions "Inspiration & Emploi Senior" (YouTube France)</h5>
                                <p style="font-size: 0.9em;">Cliquez sur une vid√©o pour l'ajouter √† votre biblioth√®que et la visionner.</p>
                                <div class="suggested-videos-list" id="suggestedVideosList">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="module1" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module1">
                     <span id="module1-title"><span class="icon">üéØ</span>Ton Diagnostic Personnel</span>
                </button>
                <div id="content-module1" class="accordion-content">
                    <p>Commen√ßons par un √©tat des lieux honn√™te. Cet outil est ton miroir : il t'aidera √† voir clairement tes forces et les domaines o√π tu peux progresser. Il n'y a ni bonne ni mauvaise r√©ponse.</p>
                    
                    <article class="questionnaire-item">
                        <h4>Confiance et √âtat d'Esprit</h4>
                        <p><strong>1. Sur une √©chelle de 1 √† 10, quel est ton niveau de confiance en ta capacit√© √† retrouver un emploi qui te correspond ?</strong><br><em>(Pourquoi c'est important : La confiance est contagieuse. Si tu crois en toi, le recruteur sera plus enclin √† le faire aussi.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="confidenceSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="confidenceValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>2. Sur une √©chelle de 1 √† 10, comment √©values-tu ta r√©silience face aux d√©fis (silence, refus) ?</strong><br><em>(Pourquoi c'est important : La r√©silience est la cl√© pour durer et ne pas se d√©courager.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="resilienceSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="resilienceValue">5</span>
                        </div>
                    </article>

                    <h4>Valorisation et Discours</h4>
                    <article class="questionnaire-item">
                        <p><strong>3. Sur une √©chelle de 1 √† 10, √† quel point es-tu au clair sur tes 3 plus grandes forces / comp√©tences-cl√©s ?</strong><br><em>(Pourquoi c'est important : Si tu ne sais pas ce que tu vends, personne ne l'ach√®tera.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="valueSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="valueValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>4. Sur une √©chelle de 1 √† 10, quelle est ton aisance √† illustrer tes comp√©tences par des exemples concrets (m√©thode STAR) ?</strong><br><em>(Pourquoi c'est important : Les preuves sont plus puissantes que les affirmations.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="storytellingSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="storytellingValue">5</span>
                        </div>
                    </article>

                    <h4>Strat√©gie et Outils</h4>
                    <article class="questionnaire-item">
                        <p><strong>5. Sur une √©chelle de 1 √† 10, quelle note donnerais-tu √† la pertinence et au modernisme de ton CV actuel ?</strong><br><em>(Pourquoi c'est important : C'est ta premi√®re impression. Il doit √™tre une bande-annonce all√©chante de tes comp√©tences.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="cvSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="cvValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>6. Sur une √©chelle de 1 √† 10, √©value ton utilisation strat√©gique de ton r√©seau professionnel.</strong><br><em>(Pourquoi c'est important : Plus de 70% des postes sont pourvus via le march√© cach√©. Ton r√©seau est ta porte d'entr√©e.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="networkSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="networkValue">5</span>
                        </div>
                    </article>
                    <div class="action-box">
                        <h4 id="analysis-title">üí° Premi√®re Analyse et Premier Pas</h4>
                        <p>Regarde tes scores ci-dessous. C√©l√®bre tes points forts ! Pour les scores plus bas, consid√®re-les non pas comme des faiblesses, mais comme tes plus grandes opportunit√©s de progression.</p>
                        
                        <div class="chart-container">
                            <canvas id="scoreChart"></canvas>
                        </div>
                        
                        <div style="text-align: center; margin-top: 15px;">
                            <button id="saveSnapshotBtn" class="button-like" style="background-color: var(--secondary-color); color: white;">üì∏ Enregistrer ce diagnostic dans mon suivi</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="module2" class="module">
                 <button class="accordion-header" aria-expanded="false" aria-controls="content-module2">
                    <span><span class="icon">üß†</span>D√©coder le March√© et Transformer les Perceptions</span>
                </button>
                <div id="content-module2" class="accordion-content">
                    <p>C'est ici que nous effectuons le travail le plus important : changer ta perspective. Nous allons prendre chaque id√©e re√ßue et la transformer en une preuve de ta valeur.</p>
                    
                    <div class="info-box">
                         <h3>Le Tableau de Transformation : Des St√©r√©otypes aux Atouts Strat√©giques</h3>
                         <p>Voici comment "recadrer" les craintes les plus communes des recruteurs.</p>
                         <table class="transformation-table">
                            <thead>
                                <tr>
                                    <th>St√©r√©otype / Crainte du Recruteur</th>
                                    <th>Ta R√©alit√© / Ton Atout Strat√©gique</th>
                                </tr>
                            </thead>
                             <tbody>
                                 <tr>
                                     <td>"Il/Elle sera r√©sistant(e) au changement."</td>
                                     <td><strong>Adaptabilit√© √âprouv√©e :</strong> Tu as v√©cu de multiples changements (technologiques, organisationnels, √©conomiques). Ta capacit√© d'adaptation n'est pas th√©orique, elle est prouv√©e par des d√©cennies de carri√®re.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle va co√ªter cher."</td>
                                     <td><strong>Rentabilit√© Imm√©diate :</strong> Ton autonomie rapide, ton expertise et ta capacit√© √† √©viter les erreurs de d√©butant repr√©sentent un gain de temps et d'argent consid√©rable pour l'entreprise. Tu es un investissement, pas un co√ªt.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle aura du mal avec un manager plus jeune."</td>
                                     <td><strong>Intelligence Relationnelle :</strong> Tu sais collaborer et faire r√©ussir ton manager, quel que soit son √¢ge. Ton objectif est la r√©ussite du projet, pas les questions d'ego. Tu peux m√™me devenir un mentor discret.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle n'est pas √† jour technologiquement."</td>
                                     <td><strong>Apprentissage Cibl√© :</strong> Tu sais apprendre ce qui est utile et pertinent pour le poste, sans te disperser. Tu te formes pour r√©soudre des probl√®mes concrets, ce qui est un gage d'efficacit√©.</td>
                                 </tr>
                             </tbody>
                         </table>
                    </div>

                     <div class="exemples-box">
                        <h3>Atelier : L'Argumentaire "Anti-Pr√©jug√©s" ‚Äì Tes R√©ponses Cl√©s</h3>
                        
                        <p><strong>Question 1 : "Nous avons une √©quipe tr√®s jeune et dynamique. Pensez-vous pouvoir vous y int√©grer ?"</strong></p>
                        <ul>
                            <li><strong>R√©ponse "Collaboration" :</strong> "J'appr√©cie √©norm√©ment la collaboration interg√©n√©rationnelle. Dans mon exp√©rience, la confrontation des id√©es entre des profils exp√©riment√©s et des visions plus nouvelles est ce qui cr√©e le plus de valeur. Je suis curieux d'apprendre de leur agilit√© et je peux leur apporter mon recul sur des situations complexes."</li>
                            <li><strong>R√©ponse "Focus Projet" :</strong> "Pour moi, l'√¢ge n'est pas un sujet. Ce qui compte, c'est la comp√©tence, le respect mutuel et l'objectif commun. J'ai toujours travaill√© avec des personnes de tous √¢ges et ce qui nous a toujours unis, c'est la volont√© de faire avancer le projet."</li>
                        </ul>

                        <p><strong>Question 2 : "Ce poste implique d'utiliser de nouveaux logiciels que vous ne connaissez pas. N'est-ce pas un probl√®me ?"</strong></p>
                         <ul>
                            <li><strong>R√©ponse "Preuve par l'Exemple" :</strong> "C'est une excellente question. Au cours de ma carri√®re, j'ai vu arriver l'email, Internet, les CRM... √Ä chaque fois, je me suis form√© rapidement. Par exemple, chez [Ancienne entreprise], j'ai d√ª ma√Ætriser le logiciel [Nom du logiciel] en moins de deux semaines pour un projet crucial. Ma m√©thode est simple : je me concentre sur l'essentiel et je pratique. Je suis confiant dans ma capacit√© √† ma√Ætriser vos outils."</li>
                            <li><strong>R√©ponse "Motivation" :</strong> "Au contraire, c'est une source de motivation ! Apprendre de nouveaux outils est ce qui permet de rester pertinent et efficace. Je suis tr√®s curieux de d√©couvrir les v√¥tres et de voir comment ils peuvent optimiser mon travail."</li>
                        </ul>
                    </div>
                    <div class="practice-box">
                        <h3 id="practice-title">√Ä toi de jouer !</h3>
                        <p><strong>Situation :</strong> L'intervieweur te dit : <em>"Votre dernier poste remonte √† plus d'un an, pourquoi cette longue p√©riode d'inactivit√© ?"</em></p>
                        <p>C'est ta chance de transformer une potentielle faiblesse en force. Comment r√©ponds-tu ?</p>
                        <textarea id="practiceResponse" placeholder="R√©dige ici ta r√©ponse en mettant en avant ce que tu as fait de positif pendant cette p√©riode (formation, veille, projets personnels...)..."></textarea>
                        <button id="generatePracticeResponseBtn" class="button-like" style="background-color: var(--secondary-color); color: white; display: block; margin: 15px 0 0 0;">
                            G√©n√©rer le prompt pour obtenir une r√©ponse mod√®le
                        </button>
                         <div id="practiceResponseResultContainer" class="prompt-box">
                            <span class="prompt-label">Prompt √† copier :</span>
                            <div id="practiceResponsePrompt" class="prompt-content"></div>
                            <div class="prompt-actions">
                                <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('practiceResponsePrompt')">üìã Copier le Prompt</button>
                                <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="module3" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module3">
                    <span><span class="icon">üõ†Ô∏è</span>Ta Bo√Æte √† Outils Concr√®te</span>
                </button>
                <div id="content-module3" class="accordion-content">
                    <h3>Outil 1 : R√©volutionne ton CV ‚Äì L'approche "Avant / Apr√®s"</h3>
                    <p>Ton CV ne doit pas √™tre un historique, mais une promesse de valeur. Passe du descriptif √† l'impact.</p>
                    <div class="conseil-box">
                        <table class="transformation-table">
                            <thead>
                                <tr>
                                    <th>Version "Avant" (descriptive)</th>
                                    <th>Version "Apr√®s" (orient√©e r√©sultats)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>- Gestion du portefeuille clients.</td>
                                    <td>- <strong>D√©veloppement et fid√©lisation</strong> d'un portefeuille de 50 clients grands comptes, <strong>augmentant le chiffre d'affaires de 12% en un an</strong>.</td>
                                </tr>
                                <tr>
                                    <td>- Organisation d'√©v√©nements.</td>
                                    <td>- <strong>Pilotage de l'organisation</strong> de 5 s√©minaires annuels (budget 80k‚Ç¨), <strong>am√©liorant la satisfaction des participants de 25%</strong> via un nouveau format.</td>
                                </tr>
                                <tr>
                                    <td>- En charge de la comptabilit√© fournisseurs.</td>
                                    <td>- <strong>Optimisation du processus</strong> de traitement des factures fournisseurs, <strong>r√©duisant les d√©lais de paiement de 15 jours</strong> et am√©liorant les relations avec les partenaires cl√©s.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="conseil-box">
                        <h4>Liste de Verbes d'Action pour t'inspirer</h4>
                        <ul style="list-style-type: '‚Üí '; padding-left: 20px;">
                            <li><strong>Pour le leadership :</strong> Piloter, Coordonner, Superviser, F√©d√©rer, Orchestrer, Animer, Inspirer...</li>
                            <li><strong>Pour l'am√©lioration :</strong> Optimiser, R√©duire, Augmenter, Am√©liorer, Rationaliser, Simplifier, Fiabiliser...</li>
                            <li><strong>Pour la cr√©ation :</strong> D√©velopper, Concevoir, Mettre en place, Cr√©er, Lancer, Initier, B√¢tir, Structurer...</li>
                        </ul>
                    </div>

                    <div class="star-generator-section" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 12px; padding: 25px; margin: 30px 0; box-shadow: 0 4px 10px rgba(0,0,0,0.03);">
                        <div style="display: flex; align-items: center; margin-bottom: 20px;">
                            <span style="font-size: 2em; margin-right: 10px;">‚ú®</span>
                            <h3 style="margin: 0; color: var(--secondary-color);">G√©n√©rateur de Phrases STAR Interactif</h3>
                        </div>
                        
                        <img src="https://placehold.co/800x150/fff8e1/fd7e14?text=M√©thode+STAR+:+Situation,+T√¢che,+Action,+R√©sultat" alt="M√©thode STAR illustration" class="module-illustration" style="height: 150px;">


                        <p style="margin-bottom: 20px;">Utilisez ce formulaire pour construire vos preuves de r√©ussite.</p>
                        
                        <div class="info-box" style="background-color: #eef7ff; border-left: 4px solid var(--primary-color); margin-bottom: 25px;">
                            <strong>L'apport p√©dagogique : La M√©thode STAR</strong>
                            <p style="margin: 10px 0 0 0;">La m√©thode STAR structure vos exp√©riences pour les rendre irr√©futables :</p>
                            <ul style="margin: 10px 0 0 20px;">
                                <li><strong>S (Situation) :</strong> Le contexte de d√©part.</li>
                                <li><strong>T (T√¢che) :</strong> Votre objectif ou responsabilit√©.</li>
                                <li><strong>A (Action) :</strong> Ce que VOUS avez fait (verbes d'action).</li>
                                <li><strong>R (R√©sultat) :</strong> L'impact concret (chiffres, am√©lioration).</li>
                            </ul>
                        </div>

                        <div class="star-form">
                            <div style="margin-bottom: 15px;">
                                <label for="starS" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">S (Situation) : Quel √©tait le probl√®me ?</label>
                                <input type="text" id="starS" placeholder="Ex: Baisse des ventes de 15% sur la r√©gion Est." style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="starT" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">T (T√¢che) : Quel √©tait l'objectif ?</label>
                                <input type="text" id="starT" placeholder="Ex: Redresser la barre en 6 mois." style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="starA" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">A (Action) : Qu'avez-vous fait concr√®tement ?</label>
                                <input type="text" id="starA" placeholder="Ex: R√©organisation des tourn√©es et formation de 2 juniors." style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <label for="starR" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">R (R√©sultat) : Chiffres ou impact qualitatif ?</label>
                                <input type="text" id="starR" placeholder="Ex: +18% de CA et satisfaction client en hausse." style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <button id="generateStarBtn" class="button-like" style="background-color: var(--secondary-color); color: white; width: 100%; padding: 15px; font-size: 1.1em;">G√©n√©rer ma phrase impactante</button>
                        </div>

                        <div id="starResult" style="display: none; margin-top: 25px; background: #f1f8e9; padding: 20px; border-radius: 8px; border: 1px solid #c5e1a5;">
                            <div id="starOutput" style="color: #33691e; line-height: 1.6;"></div>
                            <div style="margin-top: 15px; text-align: right;">
                                <button id="copyStarBtn" style="background: none; border: none; color: var(--primary-color); cursor: pointer; font-weight: 600; text-decoration: underline;">Copier le texte</button>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Outil 2 : Entra√Ænez-vous √† la m√©thode "Avant / Apr√®s"</h3>
                    <p>Transforme une simple t√¢che en un r√©sultat quantifiable. Utilise cet atelier pour t'entra√Æner.</p>
                    <div class="star-practice-container">
                        <div id="starPracticeRows">
                            </div>
                        <button id="addStarRowBtn" class="button-like" style="background-color: var(--primary-color); color: white; margin-top: 15px;">+ Ajouter un exemple</button>
                    </div>

                    <h3>Outil 3 : Le R√©seautage Facile ‚Äì Mod√®les de Messages</h3>
                    <p>La peur de la page blanche est le premier frein au r√©seautage. Voici des mod√®les pour briser la glace.</p>
                    <div class="exemples-box">
                        <h4>Mod√®le 1 : Contacter un ancien coll√®gue (LinkedIn ou email)</h4>
                        <div class="message-template">Bonjour [Pr√©nom],<br><br>J'esp√®re que tu vas bien. Je suis tomb√© sur ton profil et j'ai vu avec plaisir ton √©volution chez [Entreprise actuelle]. F√©licitations !<br><br>De mon c√¥t√©, je suis actuellement en recherche active d'un poste de [Type de poste]. Connaissant bien mon travail chez [Ancienne entreprise commune], je serais ravi d'avoir ton avis sur mon projet et si, par hasard, tu entendais parler d'opportunit√©s dans ton r√©seau.<br><br>Serait-il possible de s'appeler 15 minutes la semaine prochaine ?<br><br>Au plaisir d'avoir de tes nouvelles,<br>[Ton Nom]</div>

                        <h4 style="margin-top: 30px;">Mod√®le 2 : Contacter une personne inconnue dans une entreprise cible</h4>
                        <div class="message-template">Bonjour [Pr√©nom Nom],<br><br>Je me permets de vous contacter car votre parcours chez [Entreprise cible] est particuli√®rement inspirant. Je suis moi-m√™me [Votre profession] avec une solide exp√©rience dans [Votre secteur/comp√©tence cl√©] et je suis tr√®s admiratif de [mentionner un projet, une valeur de l'entreprise].<br><br>Je ne souhaite pas vous d√©ranger avec une candidature, mais j'aimerais beaucoup b√©n√©ficier de votre regard d'expert. Accepteriez-vous un bref √©change de 15 minutes pour me parler des d√©fis actuels de votre secteur ?<br><br>En vous remerciant pour votre temps,<br>Cordialement,<br>[Ton Nom]</div>
                    </div>
                    
                    <h3>Outil 4 : Optimise ton Profil LinkedIn en 5 Points Cl√©s</h3>
                    <p>Ton profil LinkedIn est ta vitrine professionnelle permanente. Assure-toi qu'il soit impeccable avec cette checklist interactive.</p>
                    <div class="conseil-box">
                        <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck1">
                            <label for="linkedinCheck1"><strong>Mon titre est une promesse, pas un statut.</strong> Il doit dire ce que tu apportes, pas seulement ce que tu es. (Ex: "Sp√©cialiste en logistique internationale | Optimisation des flux et r√©duction des co√ªts" plut√¥t que "En recherche d'emploi").</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck2">
                            <label for="linkedinCheck2"><strong>Ma section "infos" est un pitch percutant.</strong> Elle doit raconter ton histoire, tes comp√©tences cl√©s et ce que tu recherches, en utilisant les mots-cl√©s de ton secteur.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck3">
                            <label for="linkedinCheck3"><strong>Mes exp√©riences sont illustr√©es par des r√©ussites chiffr√©es.</strong> Comme pour le CV, utilise la m√©thode "Apr√®s" pour chaque poste significatif.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck4">
                            <label for="linkedinCheck4"><strong>J'ai au moins 3 recommandations r√©centes.</strong> Sollicite poliment d'anciens coll√®gues ou managers. Une recommandation est une preuve sociale puissante.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck5">
                            <label for="linkedinCheck5"><strong>Mon profil est actif.</strong> Je commente ou partage du contenu pertinent au moins une fois par semaine pour rester visible aupr√®s de mon r√©seau.</label>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="module4" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module4">
                    <span><span class="icon">‚úçÔ∏è</span>Ton Plan d'Action Personnalis√©</span>
                </button>
                 <div id="content-module4" class="accordion-content">
                    <p>La transformation commence par le premier pas. D√©finis tes propres actions, sauvegarde-les, et coche-les une fois r√©alis√©es. C'est ta feuille de route vers le succ√®s.</p>
                    <div class="action-box">
                        <h3>Mes Prochains Pas Strat√©giques</h3>
                        <div class="action-item"><input type="checkbox" id="action1_check"><textarea id="action1_text" placeholder="Ex: D'ici [Date], r√©√©crire ma section 'R√©sum√©' sur LinkedIn en utilisant la m√©thode du recadrage pour mettre en avant ma s√©r√©nit√© face √† la pression."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action2_check"><textarea id="action2_text" placeholder="Ex: D'ici [Date], identifier 3 r√©ussites chiffrables de mon dernier poste et les int√©grer √† mon CV."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action3_check"><textarea id="action3_text" placeholder="Ex: D'ici [Date], envoyer 2 messages de r√©seautage authentique en utilisant les mod√®les ci-dessus."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action4_check"><textarea id="action4_text" placeholder="Ex: Planifier une activit√© ressour√ßante cette semaine (sans lien avec la recherche d'emploi) pour maintenir mon √©nergie."></textarea></div>
                    </div>
                 </div>
            </section>
            
            <section id="module5" class="module">
                 <button class="accordion-header" aria-expanded="false" aria-controls="content-module5">
                    <span><span class="icon">üìÜ</span>Historique de ta Progression</span>
                </button>
                 <div id="content-module5" class="accordion-content">
                    <p>Retrouve ici les dates de tes pr√©c√©dents diagnostics pour mesurer le chemin parcouru.</p>
                    
                    <div class="chart-container">
                        <canvas id="historyChart"></canvas>
                    </div>

                    <div class="action-box">
                        <h4>Tes Enregistrements</h4>
                        <div id="snapshotHistory" style="margin-top: 20px; font-size: 1em; line-height: 2;"></div>
                    </div>
                </div>
            </section>

             <section id="module6" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module6">
                    <span><span class="icon">ü§ñ</span>Ton Assistant Carri√®re IA</span>
                </button>
                <div id="content-module6" class="accordion-content">
                    <h3>Outil 1 : Analyse et Am√©lioration de CV par l'IA</h3>
                    <p>Collez le contenu de votre CV actuel ci-dessous ou d√©posez un fichier. Notre g√©n√©rateur de prompt cr√©era une commande experte √† envoyer √† l'IA pour analyser et r√©√©crire votre CV.</p>
                    
                    <img src="https://placehold.co/800x200/f0f0f0/0056b3?text=Analyse+Intelligente+de+votre+CV+par+l'IA" alt="IA analyse CV" class="module-illustration" style="height: 150px; object-fit: cover;">

                    <div class="action-box">
                         <div id="cvDropZone">
                            <p>Glissez-d√©posez un fichier (PDF, Word, Txt) ici, ou collez le texte de votre CV ci-dessous.</p>
                        </div>
                        <div id="cvDropStatus" class="drop-status"></div>
                        <textarea id="cvInputArea" placeholder="Collez ici l'int√©gralit√© du texte de votre CV..." style="width: 100%; min-height: 250px; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-family: 'Poppins', sans-serif; margin-top: 15px;"></textarea>
                        <button id="analyzeCvBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 15px auto 0 auto;">
                            üöÄ G√©n√©rer le Prompt d'Analyse de CV
                        </button>
                    </div>

                    <div id="cvAnalysisResultContainer" class="prompt-box">
                        <span class="prompt-label">Prompt √† copier pour l'analyse CV :</span>
                        <div id="cvAnalysisPrompt" class="prompt-content"></div>
                        <div class="prompt-actions">
                            <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('cvAnalysisPrompt')">üìã Copier le Prompt</button>
                            <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                        </div>
                    </div>


                    <h3 style="margin-top: 40px;">Outil 2 : Plan de Formation sur Mesure par l'IA</h3>
                    <p>Sur la base de votre diagnostic, demandez √† l'IA de vous construire un plan pour monter en comp√©tences.</p>
                    <div class="action-box">
                        <h4>Quelles comp√©tences souhaitez-vous renforcer ?</h4>
                        <textarea id="trainingFocus" placeholder="Ex: Am√©liorer ma pr√©sence sur LinkedIn et moderniser mon CV..."></textarea>
                        <button id="generateTrainingPlanBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 15px auto 0 auto;">
                            üí° G√©n√©rer le Prompt du Plan de Formation
                        </button>
                    </div>

                    <div id="trainingPlanResultContainer" class="prompt-box">
                         <span class="prompt-label">Prompt √† copier pour le plan de formation :</span>
                         <div id="trainingPlanPrompt" class="prompt-content"></div>
                         <div class="prompt-actions">
                            <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('trainingPlanPrompt')">üìã Copier le Prompt</button>
                            <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                        </div>
                    </div>
                </div>
            </section>

             <section id="module7" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module7">
                    <span><span class="icon">üöÄ</span>Ton Coaching Final par l'IA</span>
                </button>
                <div id="content-module7" class="accordion-content">
                     <h3>üéâ Bravo ! Tu es maintenant pr√™t(e) pour l'√©tape suivante : le coaching par l'IA</h3>
                     <div class="info-box">
                        <p>F√©licitations pour avoir compl√©t√© cet atelier ! Tu as maintenant une vision claire de tes forces et de tes axes de d√©veloppement. Pour aller plus loin, nous avons pr√©par√© un "prompt" (une instruction) sur mesure pour une IA comme Gemini, bas√© sur tes propres r√©sultats au diagnostic.</p>
                        <p>Copie ce prompt et colle-le dans une conversation avec Gemini pour recevoir un plan de coaching et de formation ultra-personnalis√©, cr√©√© juste pour toi.</p>
                     </div>
                     <button id="generatePromptBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 20px auto;">G√©n√©rer mon prompt de coaching personnalis√©</button>
                     
                     <div id="promptResultContainer" class="prompt-box">
                        <span class="prompt-label">Ton Prompt de Coaching Final :</span>
                        <pre id="finalPrompt" class="prompt-content"></pre>
                        <div class="prompt-actions">
                            <button id="copyPromptBtn" class="button-like" style="background-color: var(--info-color); color: white;">üìã Copier le Prompt</button>
                            <button id="launchGeminiBtn" class="button-like" style="background-color: #8e44ad; color: white;">üöÄ Lancer mon coaching sur Gemini</button>
                        </div>
                     </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // ----- √âL√âMENTS DU DOM -----
        const sliders = document.querySelectorAll('input[type="range"]');
        const actionTextareas = document.querySelectorAll('.action-item textarea');
        const actionCheckboxes = document.querySelectorAll('.action-item input[type="checkbox"]');
        const linkedinCheckboxes = document.querySelectorAll('.checklist-item input[type="checkbox"]');
        const practiceTextarea = document.getElementById('practiceResponse');
        const cvInputArea = document.getElementById('cvInputArea');
        const trainingFocus = document.getElementById('trainingFocus');

        // STAR Generator Elements
        const starS = document.getElementById('starS');
        const starT = document.getElementById('starT');
        const starA = document.getElementById('starA');
        const starR = document.getElementById('starR');
        const generateStarBtn = document.getElementById('generateStarBtn');
        const starResult = document.getElementById('starResult');
        const starOutput = document.getElementById('starOutput');
        const copyStarBtn = document.getElementById('copyStarBtn');

        const starInputs = [starS, starT, starA, starR].filter(el => el);

        const allStaticInputs = [...sliders, ...actionTextareas, ...actionCheckboxes, practiceTextarea, cvInputArea, trainingFocus, ...linkedinCheckboxes, ...starInputs];

        const saveBtn = document.getElementById('saveBtn');
        const loadBtn = document.getElementById('loadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const saveStatus = document.getElementById('saveStatus');

        const nameModal = document.getElementById('nameModal');
        const userNameInput = document.getElementById('userNameInput');
        const submitNameBtn = document.getElementById('submitNameBtn');

        const saveSnapshotBtn = document.getElementById('saveSnapshotBtn');
        const chartCanvas = document.getElementById('scoreChart');
        let myScoreChart;
        let historyChart; // Variable for the history chart

        const starPracticeRowsContainer = document.getElementById('starPracticeRows');
        const addStarRowBtn = document.getElementById('addStarRowBtn');
        let starRowCounter = 0;

        // ----- PHOTO LANGAGE ELEMENTS -----
        const suggestedPhotos = document.querySelectorAll('.suggested-photo');
        const photoUploadInput = document.getElementById('photoUploadInput');
        const photoDropZone = document.getElementById('photoDropZone');
        const photoSelectionContainer = document.getElementById('photoSelectionContainer');
        const emptySelectionMsg = document.getElementById('emptySelectionMsg');

        let selectedPhotos = [];

        // ----- VIDEO LIBRARY ELEMENTS -----
        const videoUrlInput = document.getElementById('videoUrlInput');
        const addVideoBtn = document.getElementById('addVideoBtn');
        const userVideoContainer = document.getElementById('userVideoContainer');
        const emptyVideoMsg = document.getElementById('emptyVideoMsg');
        const suggestedVideosList = document.getElementById('suggestedVideosList');

        let selectedVideos = [];

        // List of suggested videos (ID + Title + Thumbnail)
        const suggestedVideosData = [
            { id: 'mwKITSYbCec', title: 'Seniors : Quels atouts pour l\'entreprise ?' },
            { id: 'UvLuWcx53lk', title: 'Trouver un emploi apr√®s 50 ans' },
            { id: 've_t1Eo-eYU', title: 'Convaincre un recruteur quand on est senior' },
            { id: 'fLLtubsrCCk', title: 'Valoriser son exp√©rience : les cl√©s' },
            { id: 'rQ5EPt2vRRY', title: 'Coaching : Rebondir apr√®s 45/50 ans' },
            { id: 'MHoEZkPw3uk', title: 'Seniors et Emploi : Stop aux clich√©s' }
        ];

        // ----- ACCORDION LOGIC -----
        const accordionContainer = document.getElementById('accordionContainer');
        const modules = accordionContainer ? accordionContainer.querySelectorAll('.module') : [];

        function toggleAccordion(moduleEl) {
            const wasActive = moduleEl.classList.contains('active');
            
            // Close all modules
            modules.forEach(m => m.classList.remove('active'));

            // If the clicked module was not active, open it
            if (!wasActive) {
                moduleEl.classList.add('active');
                localStorage.setItem('activeModuleId', moduleEl.id);
            } else {
                localStorage.removeItem('activeModuleId');
            }
        }

        modules.forEach(moduleEl => {
            const header = moduleEl.querySelector('.accordion-header');
            if (header) {
                header.addEventListener('click', () => toggleAccordion(moduleEl));
            }
        });

        // Restore active module on load
        const activeModuleId = localStorage.getItem('activeModuleId');
        if (activeModuleId) {
            const activeModule = document.getElementById(activeModuleId);
            if (activeModule) {
                activeModule.classList.add('active');
            }
        } else {
            // Open the first module by default if none is saved
            const firstModule = document.getElementById('module0');
            if (firstModule) {
                firstModule.classList.add('active');
            }
        }


        // ----- FONCTIONS UTILITAIRES -----
        function updateSliderValue(slider) {
            const valueSpan = document.getElementById(slider.id.replace('Slider', 'Value'));
            if (valueSpan) valueSpan.textContent = slider.value;
        }

        function showStatus(message, duration = 3000) {
            if (!saveStatus) return;
            saveStatus.textContent = message;
            saveStatus.style.opacity = '1';
            setTimeout(() => { saveStatus.style.opacity = '0'; }, duration);
        }

        function personalizeContent(name) {
            if (!name) return;
            const welcomeTitle = document.getElementById('welcome-title');
            if(welcomeTitle) welcomeTitle.innerHTML = `Bienvenue ${name} ! Vos Objectifs...`;
            
            const module1Title = document.getElementById('module1-title');
            if(module1Title) module1Title.innerHTML = `<span class="icon">üéØ</span>Ton Diagnostic Personnel, ${name}`;
            
            const analysisTitle = document.getElementById('analysis-title');
            if(analysisTitle) analysisTitle.innerHTML = `üí° ${name}, ta Premi√®re Analyse`;
            
            const practiceTitle = document.getElementById('practice-title');
            if(practiceTitle) practiceTitle.innerHTML = `√Ä toi de jouer, ${name} !`;
        }
        
        // Fonctions globales pour les boutons de prompt
        window.copyToClipboard = function(elementId) {
            const element = document.getElementById(elementId);
            if (!element) return;
            const text = element.innerText || element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                alert("Prompt copi√© ! Vous pouvez maintenant le coller dans Gemini.");
            }).catch(err => {
                console.error('Erreur lors de la copie :', err);
                // Fallback pour les anciens navigateurs
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("Copy");
                textArea.remove();
                alert("Prompt copi√© !");
            });
        };

        window.openGemini = function() {
            window.open('https://gemini.google.com/', '_blank');
        };


        // ----- PHOTO LANGAGE LOGIC -----
        function renderSelectedPhotos() {
            if (!photoSelectionContainer) return;

            // Clear current display except empty msg
            Array.from(photoSelectionContainer.children).forEach(child => {
                if (child.id !== 'emptySelectionMsg') {
                    photoSelectionContainer.removeChild(child);
                }
            });

            if (selectedPhotos.length === 0) {
                if (emptySelectionMsg) emptySelectionMsg.style.display = 'block';
            } else {
                if (emptySelectionMsg) emptySelectionMsg.style.display = 'none';
                
                selectedPhotos.forEach((photo, index) => {
                    const card = document.createElement('div');
                    card.className = 'photo-card';
                    card.innerHTML = `
                        <img src="${photo.src}" alt="S√©lection ${index + 1}">
                        <button class="delete-btn" data-id="${photo.id}">√ó</button>
                        <div class="photo-card-content">
                            <textarea placeholder="Pourquoi cette image ? (Ex: '√áa repr√©sente ma capacit√© √† rebondir...')" data-id="${photo.id}">${photo.note || ''}</textarea>
                        </div>
                    `;
                    photoSelectionContainer.appendChild(card);
                });

                // Re-attach event listeners for deletes and text changes
                photoSelectionContainer.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const id = e.target.getAttribute('data-id');
                        removePhoto(id);
                    });
                });

                photoSelectionContainer.querySelectorAll('textarea').forEach(area => {
                    area.addEventListener('input', (e) => {
                        const target = e.target;
                        const id = target.getAttribute('data-id');
                        const photo = selectedPhotos.find(p => p.id === id);
                        if (photo) photo.note = target.value;
                    });
                });
            }
        }

        function addPhoto(src, note = "") {
            const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
            selectedPhotos.push({ id, src, note });
            renderSelectedPhotos();
        }

        function removePhoto(id) {
            selectedPhotos = selectedPhotos.filter(p => p.id !== id);
            renderSelectedPhotos();
        }

        // Suggested photos click
        suggestedPhotos.forEach(img => {
            img.addEventListener('click', () => {
                const src = img.src;
                addPhoto(src);
            });
        });

        // File Upload logic
        if (photoDropZone && photoUploadInput) {
            photoDropZone.addEventListener('click', () => photoUploadInput.click());
            
            photoDropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                photoDropZone.classList.add('drag-over');
            });
            photoDropZone.addEventListener('dragleave', () => {
                photoDropZone.classList.remove('drag-over');
            });
            photoDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                photoDropZone.classList.remove('drag-over');
                if (e.dataTransfer && e.dataTransfer.files.length > 0) {
                    handleFiles(e.dataTransfer.files);
                }
            });

            photoUploadInput.addEventListener('change', () => {
                if (photoUploadInput.files && photoUploadInput.files.length > 0) {
                    handleFiles(photoUploadInput.files);
                }
            });
        }

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        if (e.target && e.target.result) {
                            addPhoto(e.target.result);
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // ----- VIDEO LIBRARY LOGIC -----

        function extractYoutubeId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length == 11) ? match[7] : false;
        }

        function renderUserVideos() {
            if (!userVideoContainer) return;

            // Clear current videos except msg
            Array.from(userVideoContainer.children).forEach(child => {
                if (child.id !== 'emptyVideoMsg') {
                    userVideoContainer.removeChild(child);
                }
            });

            if (selectedVideos.length === 0) {
                if (emptyVideoMsg) emptyVideoMsg.style.display = 'block';
            } else {
                if (emptyVideoMsg) emptyVideoMsg.style.display = 'none';

                selectedVideos.forEach((video) => {
                    const card = document.createElement('div');
                    card.className = 'video-card';
                    card.innerHTML = `
                        <button class="delete-video-btn" data-id="${video.id}" title="Supprimer">√ó</button>
                        <div class="video-wrapper">
                            <iframe src="https://www.youtube.com/embed/${video.youtubeId}" allowfullscreen></iframe>
                        </div>
                    `;
                    userVideoContainer.appendChild(card);
                });

                // Attach delete events
                userVideoContainer.querySelectorAll('.delete-video-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const id = e.target.getAttribute('data-id');
                        removeVideo(id);
                    });
                });
            }
        }

        function addVideo(youtubeId) {
            // Check if already added
            if (selectedVideos.some(v => v.youtubeId === youtubeId)) {
                alert("Cette vid√©o est d√©j√† dans votre biblioth√®que.");
                return;
            }
            const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
            selectedVideos.push({ id, youtubeId });
            renderUserVideos();
        }

        function removeVideo(id) {
            selectedVideos = selectedVideos.filter(v => v.id !== id);
            renderUserVideos();
        }

        function renderSuggestedVideos() {
            if (!suggestedVideosList) return;
            suggestedVideosList.innerHTML = '';
            suggestedVideosData.forEach(video => {
                const item = document.createElement('div');
                item.className = 'suggested-video-item';
                item.title = "Cliquez pour ajouter √† votre biblioth√®que";
                // Use standard youtube thumbnail
                item.innerHTML = `
                    <img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${video.title}">
                    <p>${video.title}</p>
                `;
                item.addEventListener('click', () => {
                    addVideo(video.id);
                    // Scroll to library
                    if(userVideoContainer) userVideoContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
                suggestedVideosList.appendChild(item);
            });
        }

        if (addVideoBtn && videoUrlInput) {
            addVideoBtn.addEventListener('click', () => {
                const url = videoUrlInput.value.trim();
                if (url) {
                    const videoId = extractYoutubeId(url);
                    if (videoId) {
                        addVideo(videoId);
                        videoUrlInput.value = '';
                    } else {
                        alert("Lien YouTube invalide. Veuillez coller un lien complet (ex: https://www.youtube.com/watch?v=...)");
                    }
                }
            });
        }


        // ----- STAR PRACTICE -----
        function addStarPracticeRow(beforeText = '', afterText = '') {
            if (!starPracticeRowsContainer) return;
            starRowCounter++;
            const row = document.createElement('div');
            row.className = 'star-practice-row';
            row.innerHTML = `
                <div class="input-group">
                    <label for="star-before-${starRowCounter}">Phrase "Avant" (descriptive) :</label>
                    <textarea id="star-before-${starRowCounter}" class="star-before" placeholder="Ex: Gestion du portefeuille clients.">${beforeText}</textarea>
                </div>
                <div class="input-group">
                    <label for="star-after-${starRowCounter}">Phrase "Apr√®s" (orient√©e r√©sultats) :</label>
                    <textarea id="star-after-${starRowCounter}" class="star-after" placeholder="Ex: Augmentation de 12% du CA en un an par la fid√©lisation d'un portefeuille de 50 clients grands comptes.">${afterText}</textarea>
                </div>
                <button class="delete-row-btn" aria-label="Supprimer cet exemple">&times;</button>
            `;
            starPracticeRowsContainer.appendChild(row);
        }

        if (addStarRowBtn) {
            addStarRowBtn.addEventListener('click', () => addStarPracticeRow());
        }

        if (starPracticeRowsContainer) {
            starPracticeRowsContainer.addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('delete-row-btn')) {
                    target.closest('.star-practice-row')?.remove();
                }
            });
        }

        // ----- LOGIQUE G√âN√âRATEUR STAR -----
        if (generateStarBtn && starResult && starOutput && starS && starT && starA && starR) {
            generateStarBtn.addEventListener('click', () => {
                const s = starS.value.trim();
                const t = starT.value.trim();
                const a = starA.value.trim();
                const r = starR.value.trim();

                if (!s && !t && !a && !r) {
                    alert("Remplissez au moins quelques champs pour g√©n√©rer une phrase.");
                    return;
                }

                // Construction de la phrase STAR
                let cvBullet = "";
                if (a) cvBullet += `<strong>${a.charAt(0).toUpperCase() + a.slice(1)}</strong>`;
                if (t) cvBullet += ` pour ${t}`;
                if (s) cvBullet += ` (contexte : ${s})`;
                if (r) cvBullet += `. R√©sultat : <strong>${r}</strong>.`;

                let story = "";
                story += `¬´ Dans un contexte de ${s || '...'}, o√π l'objectif √©tait de ${t || '...'}, j'ai ${a ? a.charAt(0).toLowerCase() + a.slice(1) : '...'}, ce qui a permis ${r ? r.charAt(0).toLowerCase() + r.slice(1) : '...'} ¬ª`;

                starOutput.innerHTML = `
                    <div style="margin-bottom: 15px;">
                        <strong>üìù Pour votre CV (Style Bullet Point) :</strong><br>
                        ${cvBullet || "<em>Compl√©tez les champs pour voir le r√©sultat.</em>"}
                    </div>
                    <div>
                        <strong>üó£Ô∏è Pour votre Entretien (Style Storytelling) :</strong><br>
                        <em>${story}</em>
                    </div>
                `;
                
                starResult.style.display = 'block';
            });
        }

        if (copyStarBtn && starOutput) {
            copyStarBtn.addEventListener('click', () => {
                // Create a temporary textarea to copy text without HTML tags
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = starOutput.innerText;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                document.execCommand('copy');
                document.body.removeChild(tempTextArea);
                
                const originalText = copyStarBtn.textContent;
                copyStarBtn.textContent = "‚úÖ Copi√© !";
                setTimeout(() => copyStarBtn.textContent = originalText, 2000);
            });
        }

        // ----- GESTION DES DONN√âES -----
        function saveProgress() {
            const progressData = {};
            allStaticInputs.forEach(input => {
                const el = input;
                if(el && el.id) {
                        progressData[el.id] = (el.type === 'checkbox') ? el.checked : el.value;
                }
            });

            const starRowsData = [];
            document.querySelectorAll('.star-practice-row').forEach(row => {
                const before = row.querySelector('.star-before').value;
                const after = row.querySelector('.star-after').value;
                starRowsData.push({ before, after });
            });
            progressData.starPractice = starRowsData;
            
            // Save Photo Langage Data
            progressData.photoSelection = selectedPhotos;
            // Save Video Library Data
            progressData.videoSelection = selectedVideos;
            
            if (localStorage.getItem('workshopUserName')) {
                progressData.userName = localStorage.getItem('workshopUserName');
            }
            
            try {
                localStorage.setItem('workshopProgressSeniors', JSON.stringify(progressData));
                showStatus("Progr√®s de la session sauvegard√© !");
            } catch (e) {
                console.error(e);
                if (e.name === 'QuotaExceededError') {
                    alert("Attention : Vos images sont trop volumineuses pour la sauvegarde locale. Seul le texte a √©t√© sauvegard√©. Essayez avec des images plus l√©g√®res.");
                    // Fallback: save without photos if quota exceeded
                    progressData.photoSelection = [];
                    localStorage.setItem('workshopProgressSeniors', JSON.stringify(progressData));
                }
            }
        }

        function loadProgress() {
            const savedData = localStorage.getItem('workshopProgressSeniors');
            if (savedData) {
                const progressData = JSON.parse(savedData);
                allStaticInputs.forEach(input => {
                    const el = input;
                    if (el && el.id && progressData[el.id] !== undefined) {
                        if (el.type === 'checkbox') {
                            el.checked = progressData[el.id];
                        } else {
                            el.value = progressData[el.id];
                        }
                        if (el.type === 'range') {
                            updateSliderValue(el);
                        }
                    }
                });

                if (progressData.starPractice && Array.isArray(progressData.starPractice)) {
                    if (starPracticeRowsContainer) {
                        starPracticeRowsContainer.innerHTML = '';
                        progressData.starPractice.forEach(item => {
                            addStarPracticeRow(item.before, item.after);
                        });
                    }
                }
                
                // Load Photo Langage
                if (progressData.photoSelection && Array.isArray(progressData.photoSelection)) {
                    selectedPhotos = progressData.photoSelection;
                    renderSelectedPhotos();
                }

                    // Load Video Library
                if (progressData.videoSelection && Array.isArray(progressData.videoSelection)) {
                    selectedVideos = progressData.videoSelection;
                    renderUserVideos();
                }

                if (progressData.userName) {
                    localStorage.setItem('workshopUserName', progressData.userName);
                    personalizeContent(progressData.userName);
                }
                
                showStatus("Session pr√©c√©dente charg√©e.", 2000);
                initializeChart();
                initializeHistoryChart(); // Initialize history chart after loading 
            } else {
                showStatus("Aucune donn√©e de session trouv√©e.", 2000);
            }
        }

        function resetProgress() {
            if (confirm("√ätes-vous s√ªr de vouloir effacer toute votre progression ? Cette action est irr√©versible.")) {
                localStorage.removeItem('workshopProgressSeniors');
                localStorage.removeItem('workshopUserName');
                localStorage.removeItem('workshopScoreHistory');
                localStorage.removeItem('activeModuleId');
                window.location.reload();
            }
        }

        // ----- GESTION DE LA PERSONNALISATION -----
        function handleNameSubmission() {
            if (!userNameInput || !nameModal) return;
            const userName = userNameInput.value.trim();
            if (userName) {
                localStorage.setItem('workshopUserName', userName);
                personalizeContent(userName);
                nameModal.classList.remove('visible');
            } else {
                alert("Veuillez entrer un pr√©nom.");
            }
        }

        // ----- GESTION DU DIAGRAMME D'√âVOLUTION (MODULE 1) -----
        function getSliderValues() {
            return [
                parseInt(document.getElementById('confidenceSlider').value) || 5,
                parseInt(document.getElementById('resilienceSlider').value) || 5,
                parseInt(document.getElementById('valueSlider').value) || 5,
                parseInt(document.getElementById('storytellingSlider').value) || 5,
                parseInt(document.getElementById('cvSlider').value) || 5,
                parseInt(document.getElementById('networkSlider').value) || 5
            ];
        }

        function updateChart() {
            if (!myScoreChart) return;
            const currentData = getSliderValues();
            // Update the live dataset (index 0)
            myScoreChart.data.datasets[0].data = currentData;
            myScoreChart.update();
        }

        function initializeChart() {
            const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]');
            const labels = ['Confiance', 'R√©silience', 'Valorisation', 'Storytelling', 'CV', 'R√©seau'];
            const currentData = getSliderValues();
            
            const datasets = [];

            // Dataset 1: Current Live Values
            datasets.push({
                label: 'Mon Profil Actuel (En direct)',
                data: currentData,
                fill: true,
                backgroundColor: 'rgba(0, 86, 179, 0.2)',
                borderColor: 'rgb(0, 86, 179)',
                pointBackgroundColor: 'rgb(0, 86, 179)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(0, 86, 179)',
                order: 1
            });
            
            // Dataset 2: Last Snapshot (if exists) for comparison
            if (history.length > 0) {
                    const lastSnapshot = history[history.length - 1];
                    datasets.push({
                    label: `Dernier enregistrement (${new Date(lastSnapshot.date).toLocaleDateString('fr-FR')})`,
                    data: Object.values(lastSnapshot.scores),
                    fill: false,
                    backgroundColor: 'rgba(200, 200, 200, 0.1)',
                    borderColor: 'rgba(100, 100, 100, 0.5)',
                    pointBackgroundColor: 'rgba(100, 100, 100, 0.5)',
                    borderDash: [5, 5],
                    order: 2
                });
            }

            const data = { labels: labels, datasets: datasets };

            if (myScoreChart) myScoreChart.destroy();
            
            const ctx = document.getElementById('scoreChart');
            if (!ctx) return;

            myScoreChart = new Chart(ctx, {
                type: 'radar',
                data: data,
                options: {
                    elements: { line: { borderWidth: 3 } },
                    scales: { 
                        r: { 
                            beginAtZero: true, 
                            max: 10, 
                            min: 0,
                            ticks: { stepSize: 1 }
                        } 
                    },
                    plugins: { 
                        legend: { position: 'bottom' } 
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // Update history list display text
            const historyDiv = document.getElementById('snapshotHistory');
            if(historyDiv) {
                if(history.length > 0) {
                    historyDiv.innerHTML = history.map(s => `üìÖ <strong>${new Date(s.date).toLocaleDateString('fr-FR')} √† ${new Date(s.date).toLocaleTimeString('fr-FR')}</strong>`).join('<br>');
                } else {
                    historyDiv.innerHTML = '<em>Aucun enregistrement pour le moment.</em>';
                }
            }
        }

        // ----- GESTION DU DIAGRAMME D'HISTORIQUE (MODULE 5) -----
        function initializeHistoryChart() {
            const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]');
            const ctx = document.getElementById('historyChart');
            
            // If canvas doesn't exist, exit
            if (!ctx) return;

            // If no history, handle by clearing chart or showing empty state
            if (history.length === 0) {
                    if (historyChart) {
                        historyChart.destroy();
                        historyChart = undefined;
                    }
                    return;
            }

            const labels = ['Confiance', 'R√©silience', 'Valorisation', 'Storytelling', 'CV', 'R√©seau'];
            
            // Generate datasets for each historical snapshot with distinct colors
            const datasets = history.map((snapshot, index) => {
                const hue = (index * 137.5) % 360;
                const color = `hsla(${hue}, 70%, 45%, 1)`;
                const bgColor = `hsla(${hue}, 70%, 60%, 0.1)`;

                return {
                    label: new Date(snapshot.date).toLocaleDateString('fr-FR') + ' ' + new Date(snapshot.date).toLocaleTimeString('fr-FR', {hour:'2-digit', minute:'2-digit'}),
                    data: Object.values(snapshot.scores),
                    fill: true,
                    backgroundColor: bgColor,
                    borderColor: color,
                    pointBackgroundColor: color,
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: color,
                    borderWidth: 2
                };
            });

            if (historyChart) historyChart.destroy();

            historyChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    elements: { line: { borderWidth: 2 } },
                    scales: { 
                        r: { 
                            beginAtZero: true, 
                            max: 10, 
                            min: 0,
                            ticks: { stepSize: 1 }
                        } 
                    },
                    plugins: { 
                        legend: { position: 'bottom' },
                        title: {
                            display: true,
                            text: '√âvolution de vos comp√©tences au fil du temps'
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function saveScoreSnapshot() {
            const currentScores = {
                confidence: document.getElementById('confidenceSlider').value,
                resilience: document.getElementById('resilienceSlider').value,
                value: document.getElementById('valueSlider').value,
                storytelling: document.getElementById('storytellingSlider').value,
                cv: document.getElementById('cvSlider').value,
                network: document.getElementById('networkSlider').value
            };
            const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]');
            history.push({ date: new Date().toISOString(), scores: currentScores });
            localStorage.setItem('workshopScoreHistory', JSON.stringify(history));
            showStatus("Diagnostic enregistr√© dans votre suivi !", 3000);
            
            initializeChart();
            initializeHistoryChart();
        }
        if (saveSnapshotBtn) saveSnapshotBtn.addEventListener('click', saveScoreSnapshot);


        // =================================================================
        // ================= GESTION DES PROMPTS (SANS CL√â API) ============
        // =================================================================

        // 1. PRACTICE RESPONSE PROMPT
        const generatePracticeResponseBtn = document.getElementById('generatePracticeResponseBtn');
        const practiceResponseResultContainer = document.getElementById('practiceResponseResultContainer');
        const practiceResponsePrompt = document.getElementById('practiceResponsePrompt');

        if (generatePracticeResponseBtn && practiceResponseResultContainer) {
            generatePracticeResponseBtn.addEventListener('click', () => {
                const userDraft = practiceTextarea.value.trim();
                
                const promptText = `*** INSTRUCTION POUR GEMINI ***

CONTEXTE :
Tu es un coach carri√®re expert, sp√©cialis√© dans l'accompagnement des cadres et seniors (50 ans et plus). Tu es bienveillant, strat√©gique et tr√®s orient√© "psychologie du recrutement".
Ton client est en simulation d'entretien. 
La question pos√©e par le recruteur est : "Votre dernier poste remonte √† plus d'un an, pourquoi cette longue p√©riode d'inactivit√© ?"

DONN√âES DU CANDIDAT (Ebauche de r√©ponse) :
"${userDraft || "[Le candidat n'a pas encore formul√© de r√©ponse pr√©cise, propose-lui des options standards]"}"

TA MISSION :
1. Analyse bri√®vement l'√©bauche du candidat (si fournie) : est-elle d√©fensive ? positive ? trop vague ?
2. R√©dige 3 VARIANTES de r√©ponses mod√®les parfaites que le candidat pourrait utiliser, en adoptant un ton professionnel, serein et dynamique.
   - Option A : L'approche "Formation et Mont√©e en comp√©tences" (focus sur ce qu'il a appris).
   - Option B : L'approche "Projet Personnel / B√©n√©volat" (focus sur l'activit√© continue).
   - Option C : L'approche "Pause Strat√©gique et Recherche cibl√©e" (focus sur la s√©lectivit√© et la motivation pour CE poste pr√©cis).

CONTRAINTES :
- Chaque r√©ponse doit transformer le "vide" en "plein".
- Ne jamais s'excuser d'√™tre au ch√¥mage.
- Utiliser un langage positif (√©viter "ch√¥mage", "gal√®re", pr√©f√©rer "p√©riode de transition", "consacr√© √†...").
- Terminer chaque r√©ponse par une phrase de transition qui ram√®ne la conversation sur le poste actuel (ex: "C'est pourquoi aujourd'hui, je suis pleinement disponible et op√©rationnel pour...").`;

                practiceResponsePrompt.innerText = promptText;
                practiceResponseResultContainer.style.display = 'block';
            });
        }

        // 2. CV ANALYSIS PROMPT
        const analyzeCvBtn = document.getElementById('analyzeCvBtn');
        const cvAnalysisResultContainer = document.getElementById('cvAnalysisResultContainer');
        const cvAnalysisPrompt = document.getElementById('cvAnalysisPrompt');
        const cvDropZone = document.getElementById('cvDropZone');
        const cvDropStatus = document.getElementById('cvDropStatus');

        // (Drag & Drop logic remains the same)
        if (cvDropZone) {
            cvDropZone.addEventListener('dragover', (e) => { e.preventDefault(); cvDropZone.classList.add('drag-over'); });
            cvDropZone.addEventListener('dragleave', () => { cvDropZone.classList.remove('drag-over'); });
            cvDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                cvDropZone.classList.remove('drag-over');
                if (e.dataTransfer && e.dataTransfer.files.length > 0) {
                    const file = e.dataTransfer.files[0];
                    if (file.type === 'text/plain' || file.name.endsWith('.txt')) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            if(cvInputArea) cvInputArea.value = event.target.result;
                            if(cvDropStatus) { cvDropStatus.textContent = `Fichier "${file.name}" charg√© !`; cvDropStatus.classList.add('success'); cvDropStatus.style.display = 'block'; }
                        };
                        reader.readAsText(file);
                    } else {
                        if(cvDropStatus) { cvDropStatus.textContent = `Format non support√© via le navigateur. Veuillez copier-coller le texte.`; cvDropStatus.classList.add('info'); cvDropStatus.style.display = 'block'; }
                    }
                }
            });
        }

        if (analyzeCvBtn && cvAnalysisResultContainer) {
            analyzeCvBtn.addEventListener('click', () => {
                const cvText = cvInputArea.value.trim();
                if (!cvText) { alert("Veuillez coller le texte de votre CV d'abord."); return; }

                const promptText = `*** INSTRUCTION POUR GEMINI : AUDIT EXPERT DE CV SENIOR ***

R√îLE :
Agis comme un Directeur des Ressources Humaines (DRH) exp√©riment√© et expert en "Personal Branding" pour les profils seniors. Tu connais parfaitement les attentes des recruteurs et le fonctionnement des logiciels de tri de CV (ATS).

CONTEXTE :
Voici le texte brut du CV d'un candidat senior :
----- D√âBUT DU CV -----
${cvText}
----- FIN DU CV -----

TA MISSION (EXHAUSTIVE) :
R√©alise un audit complet et sans concession de ce CV, structur√© exactement comme suit :

1. üìä ANALYSE MACRO & PREMI√àRE IMPRESSION
   - Quels sont les 3 points forts imm√©diats ?
   - Quels sont les 3 "red flags" (points bloquants) majeurs (ex: dates floues, trop de d√©tails, jargon obsol√®te) ?
   - Score estim√© de compatibilit√© ATS (sur 10) avec justification.

2. ‚úçÔ∏è R√â√âCRITURE CIBL√âE (M√âTHODE STAR)
   Choisis les 2 exp√©riences professionnelles les plus significatives du CV et r√©√©cris-les compl√®tement en rempla√ßant les listes de t√¢ches par des accomplissements chiffr√©s.
   - Exemple : Au lieu de "Gestion des ventes", √©cris "Pilotage d'une force de vente de 10 personnes, g√©n√©rant +15% de CA sur 2023".
   *Si le CV manque de chiffres, INVENTE des m√©triques r√©alistes entre parenth√®ses pour montrer au candidat le type de donn√©es attendues.*

3. üß† SECTION "PROFIL / R√âSUM√â"
   R√©dige une proposition de paragraphe d'introduction (Profil) de 4-5 lignes. Ce texte doit √™tre percutant, r√©sumer l'expertise (pas juste les ann√©es d'exp√©rience) et contenir les mots-cl√©s strat√©giques du secteur pr√©sum√©.

4. üõ°Ô∏è STRAT√âGIE "SENIOR"
   Identifie tout √©l√©ment dans le CV qui pourrait inconsciemment activer des biais √¢gistes (ex: mentionner l'ann√©e du Bac si elle est lointaine, utiliser des termes technologiques d√©suets, adresse mail type 'wanadoo'). Propose une correction pour chaque point.

FORMAT DE SORTIE : Markdown structur√©, ton professionnel, encourageant mais direct.`;

                cvAnalysisPrompt.innerText = promptText;
                cvAnalysisResultContainer.style.display = 'block';
            });
        }

        // 3. TRAINING PLAN PROMPT
        const generateTrainingPlanBtn = document.getElementById('generateTrainingPlanBtn');
        const trainingPlanResultContainer = document.getElementById('trainingPlanResultContainer');
        const trainingPlanPrompt = document.getElementById('trainingPlanPrompt');

        if (generateTrainingPlanBtn && trainingPlanResultContainer) {
            generateTrainingPlanBtn.addEventListener('click', () => {
                const focus = trainingFocus.value.trim();
                if (!focus) { alert("Veuillez indiquer un sujet."); return; }

                const promptText = `*** INSTRUCTION POUR GEMINI : ING√âNIERIE P√âDAGOGIQUE ***

R√îLE :
Tu es un Ing√©nieur P√©dagogique Expert sp√©cialis√© dans la formation continue des adultes (Andragogie) et la reconversion professionnelle.

DEMANDE DU CANDIDAT :
"Je souhaite me former et monter en comp√©tence sur le sujet suivant : ${focus}"

TA MISSION :
Construis un Plan de Formation Autonome intensif sur 4 semaines, con√ßu pour un professionnel exp√©riment√© qui veut aller droit au but.

LIVRABLE ATTENDU (Tableau Markdown) :

1. üéØ OBJECTIF P√âDAGOGIQUE GLOBAL
   D√©finis en une phrase ce que l'apprenant saura FAIRE √† la fin (comp√©tence op√©rationnelle).

2. üìö RESSOURCES RECOMMAND√âES (Sourcing pr√©cis)
   - Sugg√®re 3 cha√Ænes YouTube sp√©cifiques ou vid√©os pr√©cises (titres exacts si possible).
   - Sugg√®re 1 MOOC ou cours en ligne gratuit (Coursera, OpenClassrooms, LinkedIn Learning...).
   - Sugg√®re 1 livre ou article de r√©f√©rence incontournable.

3. üìÖ PROGRAMME HEBDOMADAIRE (4 Semaines)
   - Semaine 1 (Fondamentaux) : Quoi lire/voir ? Quel petit exercice faire ?
   - Semaine 2 (Approfondissement) : Pratique technique.
   - Semaine 3 (Mise en situation) : R√©alisation d'un mini-projet concret (d√©cris le projet).
   - Semaine 4 (Valorisation) : Comment "vendre" cette nouvelle comp√©tence sur LinkedIn et le CV (propose la phrase exacte √† ajouter au CV).

4. ‚úÖ TEST DE VALIDATION
   Liste 3 questions techniques ou 1 exercice pratique que le candidat doit r√©ussir pour s'auto-valider.`;

                trainingPlanPrompt.innerText = promptText;
                trainingPlanResultContainer.style.display = 'block';
            });
        }

        // 4. FINAL COACHING PROMPT
        const generatePromptBtn = document.getElementById('generatePromptBtn');
        const promptResultContainer = document.getElementById('promptResultContainer');
        const finalPrompt = document.getElementById('finalPrompt');
        const copyPromptBtn = document.getElementById('copyPromptBtn');
        const launchGeminiBtn = document.getElementById('launchGeminiBtn');

        if (generatePromptBtn && promptResultContainer && finalPrompt) {
            generatePromptBtn.addEventListener('click', () => {
                const userName = localStorage.getItem('workshopUserName') || 'Professionnel Senior';
                
                // R√©cup√©ration intelligente des scores faibles
                const skillMap = {
                    confidence: "Ma confiance en ma capacit√© √† retrouver un emploi",
                    resilience: "Ma r√©silience face aux refus",
                    value: "Ma clart√© sur ma valeur ajout√©e unique",
                    storytelling: "Ma capacit√© √† raconter mes r√©ussites (Storytelling)",
                    cv: "La qualit√© et l'impact de mon CV",
                    network: "Mon utilisation du R√©seau"
                };
                
                const scores = Object.keys(skillMap).map(key => ({
                    id: key,
                    text: skillMap[key],
                    score: parseInt(document.getElementById(`${key}Slider`).value, 10)
                }));

                scores.sort((a, b) => a.score - b.score);
                const weakPoints = scores.slice(0, 2); // Les 2 plus faibles

                const promptText = `*** INSTRUCTION POUR GEMINI : COACHING CARRI√àRE STRAT√âGIQUE ***

R√îLE : 
Tu es un Coach de Carri√®re Ex√©cutif de haut niveau. Tu ne donnes pas des conseils g√©n√©riques ("refais ton CV"), tu fournis des strat√©gies psychologiques et tactiques pr√©cises.

PROFIL DU CLIENT :
Nom : ${userName}
Profil : Professionnel Senior (50 ans +)
Points de douleur majeurs identifi√©s (auto-√©valuation faible) :
1. ${weakPoints[0].text} (Note: ${weakPoints[0].score}/10)
2. ${weakPoints[1].text} (Note: ${weakPoints[1].score}/10)

TA MISSION :
√âlabore une "Feuille de Route de Transformation" sur 30 jours pour r√©soudre sp√©cifiquement ces 2 points faibles.

STRUCTURE DE LA R√âPONSE ATTENDUE :

PARTIE 1 : LE DIAGNOSTIC PSYCHOLOGIQUE (Analyse √† froid)
Explique au client pourquoi il ressent cette faiblesse sur ces points pr√©cis (m√©canismes classiques chez les seniors : syndrome de l'imposteur, internalisation des st√©r√©otypes, isolement...). Sois empathique mais analytique.

PARTIE 2 : LE PLAN D'ATTAQUE (Actions contre-intuitives)
Pour chaque point faible, propose 2 actions "Choc".
*Exemple : Si le r√©seau est faible, ne pas dire "contactez des gens", mais "Identifiez 3 anciens coll√®gues perdus de vue et envoyez-leur ce message pr√©cis : [Script]..."*

PARTIE 3 : SCRIPTS ET TEMPLATES (Outils pr√™ts √† l'emploi)
R√©dige pour moi :
- Un "Mantra" ou une affirmation √† me r√©p√©ter chaque matin pour booster la confiance.
- Un script de r√©ponse √† une objection li√©e √† mon √¢ge.
- Un mod√®le de message LinkedIn audacieux pour approcher un d√©cideur.

PARTIE 4 : KPI (Indicateurs de succ√®s)
Comment saurai-je dans 30 jours que j'ai r√©ussi ? Donne-moi 3 crit√®res mesurables.

TON :
Coach sportif de haut niveau : exigeant, pr√©cis, √©nergisant. Pas de jargon corporate vide.`;

                finalPrompt.innerText = promptText;
                promptResultContainer.style.display = 'block';
            });
        }

        if (copyPromptBtn && finalPrompt) {
            copyPromptBtn.addEventListener('click', () => {
                window.copyToClipboard('finalPrompt');
            });
        }

        if (launchGeminiBtn) {
            launchGeminiBtn.addEventListener('click', () => {
                window.openGemini();
            });
        }


        // ----- INITIALISATION -----
        if (saveBtn) saveBtn.addEventListener('click', saveProgress);
        if (loadBtn) loadBtn.addEventListener('click', loadProgress);
        if (resetBtn) resetBtn.addEventListener('click', resetProgress);

        if (submitNameBtn) submitNameBtn.addEventListener('click', handleNameSubmission);
        if (userNameInput) userNameInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleNameSubmission(); });

        sliders.forEach(slider => {
            updateSliderValue(slider);
            slider.addEventListener('input', () => {
                updateSliderValue(slider);
                updateChart(); // Update chart in real-time
            });
        });

        const savedName = localStorage.getItem('workshopUserName');
        if (!savedName) {
            if (nameModal) nameModal.classList.add('visible');
        } else {
            personalizeContent(savedName);
        }

        // Load initial data
        if (localStorage.getItem('workshopProgressSeniors')) {
            loadProgress();
        } else {
            addStarPracticeRow(); // Add one empty row on first load
            initializeChart(); // Initialize chart even without saved data
            initializeHistoryChart();
        }

        renderSuggestedVideos(); // Initialize suggested videos list

        // Ensure chart renders correctly after layout settles
        setTimeout(() => {
            initializeChart();
            initializeHistoryChart();
        }, 500);
    </script>
</body>
</html>
```