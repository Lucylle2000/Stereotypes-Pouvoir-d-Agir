<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier Interactif : 50 et +, Ton Exp√©rience est ton Super-pouvoir</title>
    <!-- Librairies -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Confetti Library (Lightweight) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- VARIABLES & THEMES --- */
        :root {
            --primary-color: #0056b3; 
            --secondary-color: #003366; 
            --accent-color: #fd7e14;
            --info-color: #17a2b8; 
            --success-color: #28a745; 
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-bg: #f4f7f9;
            --content-bg: #FFFFFF; 
            --text-color: #343a40; 
            --text-muted: #6c757d;
            --border-color: #dee2e6; 
            --border-radius: 12px; 
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body.dark-mode {
            --primary-color: #4dabf7; 
            --secondary-color: #a5d8ff; 
            --accent-color: #ff922b;
            --info-color: #66d9e8; 
            --success-color: #69db7c; 
            --light-bg: #111827;
            --content-bg: #1f2937; 
            --text-color: #f3f4f6; 
            --text-muted: #9ca3af;
            --border-color: #374151;
        }

        /* --- GLOBAL STYLES --- */
        html { scroll-behavior: smooth; scroll-padding-top: 100px; }
        body {
            font-family: 'Poppins', sans-serif; line-height: 1.8; margin: 0;
            padding-top: 80px; background-color: var(--light-bg); color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- NAVIGATION BAR --- */
        #nav-bar {
            position: fixed; top: 0; left: 0; right: 0;
            background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); padding: 10px 20px;
            z-index: 1000; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color); height: 70px; transition: background-color 0.3s;
        }
        body.dark-mode #nav-bar { background-color: rgba(31, 41, 55, 0.95); }

        #user-info-top input {
            padding: 8px 15px; font-size: 1rem; width: 200px; margin: 0;
            border: 1px solid var(--border-color); background-color: var(--content-bg);
            color: var(--text-color); border-radius: 20px; font-weight: 600; outline: none;
            transition: var(--transition);
        }
        #user-info-top input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0,86,179,0.1); }

        .nav-utils { display: flex; gap: 10px; align-items: center; }
        .nav-util-btn {
            width: 40px; height: 40px; background-color: var(--content-bg);
            border: 1px solid var(--border-color); border-radius: 50%;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            color: var(--text-color); font-size: 1.1rem; transition: var(--transition);
        }
        .nav-util-btn:hover { background-color: var(--primary-color); color: white; border-color: var(--primary-color); transform: translateY(-2px); box-shadow: var(--box-shadow); }
        
        #nav-dropdown { position: relative; }
        #nav-dropdown-content {
            display: none; position: absolute; background-color: var(--content-bg);
            min-width: 320px; box-shadow: var(--box-shadow); z-index: 2000;
            border-radius: var(--border-radius); padding: 10px; max-height: 70vh;
            overflow-y: auto; right: 0; top: 55px; border: 1px solid var(--border-color);
        }
        #nav-dropdown-content a { color: var(--text-color); padding: 10px 15px; text-decoration: none; display: block; border-radius: 6px; font-size: 0.95rem; }
        #nav-dropdown-content a:hover { background-color: var(--light-bg); color: var(--primary-color); }
        #nav-dropdown-content.show { display: block; animation: fadeIn 0.2s; }

        #nav-center { flex-grow: 1; display: flex; justify-content: center; }
        #nav-center ul { list-style: none; padding: 0; margin: 0; display: flex; gap: 15px; }
        #nav-center a {
            display: flex; align-items: center; justify-content: center; width: 42px; height: 42px;
            border-radius: 50%; background-color: var(--content-bg); color: var(--text-muted);
            font-size: 1.2rem; transition: var(--transition); border: 1px solid transparent;
        }
        #nav-center a:hover { color: var(--primary-color); background-color: var(--light-bg); transform: scale(1.1); }
        #nav-center a.active { background-color: var(--primary-color); color: white; box-shadow: 0 4px 10px rgba(0,86,179,0.3); transform: scale(1.1); }

        #save-feedback {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px);
            background-color: var(--success-color); color: white; padding: 12px 25px;
            border-radius: 30px; z-index: 2000; opacity: 0; visibility: hidden;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            font-weight: 600; display: flex; align-items: center; gap: 10px;
        }
        #save-feedback.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

        /* --- SCROLL TO TOP BTN --- */
        #scroll-top-btn {
            position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px;
            background-color: var(--primary-color); color: white; border-radius: 50%;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: var(--transition);
            opacity: 0; visibility: hidden; z-index: 999; font-size: 1.2rem; border: none;
        }
        #scroll-top-btn.visible { opacity: 1; visibility: visible; }
        #scroll-top-btn:hover { transform: translateY(-5px); background-color: var(--secondary-color); }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); z-index: 3000; backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center;
            opacity: 0; visibility: hidden; transition: opacity 0.3s;
        }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background: var(--content-bg); padding: 40px; border-radius: 20px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 90%; max-width: 500px;
            transform: scale(0.9); transition: transform 0.3s;
        }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-content h2 { color: var(--primary-color); margin-top: 0; font-weight: 700; }
        .modal-content input[type="text"] {
            width: 100%; padding: 15px; border: 2px solid var(--border-color);
            border-radius: 12px; font-size: 1.2em; margin: 20px 0; text-align: center;
            background-color: var(--light-bg); color: var(--text-color); box-sizing: border-box;
        }
        .modal-content input:focus { border-color: var(--primary-color); outline: none; }
        .modal-content button {
            padding: 15px 40px; border: none; border-radius: 12px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: transform 0.2s; width: 100%;
        }
        .modal-content button:hover { transform: scale(1.02); }

        /* --- LAYOUT & MODULES --- */
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        header {
            text-align: center; padding: 40px; background-color: var(--content-bg);
            border-radius: 20px; box-shadow: var(--box-shadow);
            margin-bottom: 40px; position: relative; overflow: hidden;
        }
        .illustrative-banner { width: 100%; height: 280px; object-fit: cover; border-radius: 20px 20px 0 0; margin-bottom: -30px; mask-image: linear-gradient(to bottom, black 80%, transparent 100%); }
        header h1 { color: var(--secondary-color); font-size: 3em; font-weight: 800; margin: 20px 0 10px 0; position: relative; z-index: 1; letter-spacing: -1px; }
        header p { font-size: 1.3em; color: var(--primary-color); font-weight: 400; position: relative; z-index: 1; }

        .module {
            background-color: var(--content-bg); margin-bottom: 25px; border-radius: 16px;
            box-shadow: var(--box-shadow); border: 1px solid var(--border-color);
            overflow: hidden; scroll-margin-top: 100px;
        }
        
        .accordion-header {
            width: 100%; background: none; border: none; padding: 25px 30px;
            text-align: left; font-size: 1.6em; font-weight: 700; color: var(--text-color);
            display: flex; align-items: center; justify-content: space-between; cursor: pointer;
            transition: background-color 0.2s;
        }
        .accordion-header:hover { background-color: var(--light-bg); }
        .accordion-header .icon { font-size: 1.4em; margin-right: 15px; color: var(--primary-color); width: 40px; text-align: center; }
        .accordion-header::after { content: '\f078'; font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 0.8em; transition: transform 0.3s ease; color: var(--text-muted); }
        .module.active .accordion-header::after { transform: rotate(180deg); color: var(--primary-color); }
        .module.active .accordion-header { color: var(--primary-color); background-color: rgba(0,86,179,0.03); }
        
        .accordion-content {
            max-height: 0; overflow: hidden;
            transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), padding 0.6s ease; 
            padding: 0 30px; opacity: 0;
        }
        .module.active .accordion-content { max-height: 20000px; overflow: visible; padding: 10px 30px 40px 30px; opacity: 1; }
        .module h3 { font-size: 1.6em; color: var(--primary-color); margin-top: 40px; margin-bottom: 20px; font-weight: 700; border-bottom: 2px solid var(--light-bg); padding-bottom: 10px; }
        .module-illustration { width: 100%; max-height: 250px; object-fit: cover; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* --- COLORED BOXES --- */
        .info-box, .conseil-box, .action-box, .exemples-box, .practice-box { padding: 25px; margin: 30px 0; border-radius: 12px; border-left: 6px solid; position: relative; overflow: hidden; }
        .info-box { background-color: #e3f2fd; border-left-color: var(--info-color); }
        .conseil-box { background-color: #e8f5e9; border-left-color: var(--success-color); }
        .action-box { background-color: #fff8e1; border-left-color: var(--accent-color); }
        .exemples-box { background-color: #f3e5f5; border-left-color: #9c27b0; }
        .practice-box { background-color: #e0f2f1; border-left-color: #009688; }
        
        body.dark-mode .info-box { background-color: rgba(23, 162, 184, 0.15); }
        body.dark-mode .conseil-box { background-color: rgba(40, 167, 69, 0.15); }
        body.dark-mode .action-box { background-color: rgba(253, 126, 20, 0.15); }
        body.dark-mode .exemples-box { background-color: rgba(142, 68, 173, 0.15); }
        body.dark-mode .practice-box { background-color: rgba(0, 121, 107, 0.15); }

        /* --- STATS GRID --- */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin: 30px 0; }
        .stat-card { background: var(--content-bg); padding: 30px; border-radius: 16px; box-shadow: var(--box-shadow); border-top: 6px solid var(--primary-color); transition: transform 0.3s ease; }
        .stat-card:hover { transform: translateY(-8px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .stat-card h4 { margin-top: 0; color: var(--secondary-color); font-size: 1.3em; margin-bottom: 15px; }
        .stat-card p { font-size: 1em; color: var(--text-muted); margin: 0; line-height: 1.6; }
        .stat-highlight { font-weight: 700; color: var(--accent-color); }

        /* --- COMPONENTS --- */
        .button-like { 
            padding: 12px 25px; border: none; border-radius: 10px; font-size: 1em; font-weight: 600; 
            cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-flex; 
            align-items: center; justify-content: center; gap: 10px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .button-like:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        .button-like:active { transform: translateY(-1px); }
        
        textarea, input[type="text"] { background-color: var(--content-bg); color: var(--text-color); transition: border 0.3s, box-shadow 0.3s; }
        textarea:focus, input[type="text"]:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(0,86,179,0.1); }
        
        .action-item textarea, .practice-box textarea, #trainingFocus, .star-practice-row textarea, #cvInputArea { width: 100%; min-height: 80px; padding: 15px; border: 1px solid var(--border-color); border-radius: 10px; font-family: 'Poppins', sans-serif; box-sizing: border-box; resize: vertical; }
        
        .slider-container { display: flex; align-items: center; gap: 20px; margin-top: 15px; background: var(--light-bg); padding: 15px; border-radius: 12px; }
        input[type="range"] { flex-grow: 1; -webkit-appearance: none; appearance: none; height: 10px; background: var(--border-color); border-radius: 10px; outline: none; transition: background 0.3s; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: var(--primary-color); border: 3px solid white; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.2); transition: transform 0.2s; }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.2); }
        .slider-value { font-weight: 700; font-size: 1.4em; color: var(--primary-color); min-width: 40px; text-align: center; }

        .transformation-table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 20px; border-radius: 12px; overflow: hidden; border: 1px solid var(--border-color); }
        .transformation-table th, .transformation-table td { padding: 18px; text-align: left; vertical-align: top; border-bottom: 1px solid var(--border-color); }
        .transformation-table th { background-color: var(--light-bg); color: var(--secondary-color); font-weight: 700; border-right: 1px solid var(--border-color); }
        .transformation-table td { background-color: var(--content-bg); border-right: 1px solid var(--border-color); }
        .transformation-table tr:last-child td { border-bottom: none; }
        .transformation-table tr:last-child th { border-bottom: none; }

        /* --- PHOTO & VIDEO --- */
        .photo-langage-container { display: flex; flex-direction: column; gap: 30px; margin-top: 20px; }
        .suggested-photos-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; }
        .suggested-photo { width: 100%; height: 110px; object-fit: cover; border-radius: 10px; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; border: 3px solid transparent; }
        .suggested-photo:hover { transform: scale(1.08); box-shadow: 0 8px 20px rgba(0,0,0,0.2); border-color: var(--primary-color); z-index: 2; }
        
        .drop-zone { border: 2px dashed var(--border-color); border-radius: 12px; padding: 40px; text-align: center; cursor: pointer; background-color: var(--light-bg); transition: all 0.3s; margin-bottom: 15px; }
        .drop-zone:hover, .drop-zone.drag-over { background-color: #e3f2fd; border-color: var(--primary-color); color: var(--primary-color); }
        
        .selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 25px; }
        .photo-card { background: var(--content-bg); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; box-shadow: var(--box-shadow); position: relative; transition: transform 0.3s; }
        .photo-card:hover { transform: translateY(-5px); }
        .photo-card img { width: 100%; height: 180px; object-fit: cover; }
        .photo-card-content { padding: 15px; }
        .photo-card .delete-btn { position: absolute; top: 10px; right: 10px; background: rgba(220, 53, 69, 0.9); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); transition: background 0.2s; }
        .photo-card .delete-btn:hover { background: #c82333; }
        
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .video-card { background: var(--content-bg); border-radius: 12px; overflow: hidden; box-shadow: var(--box-shadow); position: relative; }
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background: #000; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .video-card .delete-video-btn { position: absolute; top: -12px; right: -12px; background: #dc3545; color: white; border: 3px solid var(--content-bg); border-radius: 50%; width: 32px; height: 32px; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        .suggested-videos-list { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; margin-top: 20px; scrollbar-width: thin; }
        .suggested-video-item { flex: 0 0 220px; border-radius: 10px; overflow: hidden; border: 1px solid var(--border-color); cursor: pointer; transition: transform 0.3s; position: relative; background: var(--content-bg); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .suggested-video-item:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .suggested-video-item img { width: 100%; height: 124px; object-fit: cover; }
        .suggested-video-item p { font-size: 0.9em; padding: 10px; margin: 0; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-color); }

        /* --- PROMPTS & RESULTS --- */
        .prompt-box { background-color: #2c3e50; color: #ecf0f1; padding: 25px; border-radius: 12px; margin-top: 25px; display: none; border-left: 5px solid var(--accent-color); box-shadow: 0 10px 30px rgba(0,0,0,0.15); animation: slideDown 0.4s ease; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        body.dark-mode .prompt-box { background-color: #111827; border-color: var(--accent-color); }
        .prompt-content { white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New', Courier, monospace; font-size: 0.95em; margin-bottom: 20px; max-height: 400px; overflow-y: auto; line-height: 1.6; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        .prompt-actions { display: flex; gap: 15px; justify-content: center; margin-top: 20px; flex-wrap: wrap; }
        .prompt-label { font-weight: 700; color: #64b5f6; margin-bottom: 12px; display: block; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; }

        .star-practice-container { margin-top: 35px; padding: 30px; background-color: var(--light-bg); border: 1px solid var(--border-color); border-radius: 12px; }
        .star-practice-row { display: flex; gap: 20px; align-items: center; margin-bottom: 20px; position: relative; background: var(--content-bg); padding: 20px; border-radius: 10px; border: 1px solid var(--border-color); }
        .star-practice-row .input-group { flex: 1; }
        .delete-row-btn { background: #dc3545; color: white; border: none; border-radius: 8px; width: 36px; height: 36px; cursor: pointer; font-weight: bold; font-size: 1.2em; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: background 0.2s; }
        .delete-row-btn:hover { background: #b02a37; }
        
        .chart-container { position: relative; height: 400px; width: 100%; margin: 30px auto; padding: 20px; background: var(--content-bg); border-radius: 16px; box-shadow: var(--box-shadow); border: 1px solid var(--border-color); }
        .checklist-item { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 15px; padding: 10px; border-radius: 8px; transition: background 0.2s; }
        .checklist-item:hover { background-color: rgba(0,0,0,0.02); }
        .checklist-item input { margin-top: 6px; width: 20px; height: 20px; flex-shrink: 0; cursor: pointer; }
        .action-item { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px; }
        .action-item input { margin-top: 15px; width: 22px; height: 22px; cursor: pointer; }

        /* --- HISTORY LIST STYLING (NEW) --- */
        .history-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--content-bg);
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: transform 0.2s;
        }
        .history-row:hover { transform: translateX(5px); border-color: var(--primary-color); }
        .history-date { font-weight: 600; color: var(--secondary-color); display: flex; align-items: center; gap: 10px; }
        .history-score { 
            padding: 6px 15px; 
            border-radius: 20px; 
            font-weight: 700; 
            font-size: 0.9em;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .score-high { background-color: #28a745; }
        .score-mid { background-color: #fd7e14; }
        .score-low { background-color: #dc3545; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 900px) { #nav-center { display: none; } }
        @media (max-width: 768px) {
            body { padding-top: 80px; }
            #nav-bar { flex-wrap: wrap; height: auto; justify-content: center; gap: 10px; padding: 15px; }
            .accordion-header { font-size: 1.3em; padding: 20px; }
            .star-practice-row { flex-direction: column; align-items: stretch; }
            .delete-row-btn { position: absolute; top: 10px; right: 10px; }
            .modal-content { padding: 25px; width: 95%; }
            header h1 { font-size: 2em; }
            .history-row { flex-direction: column; align-items: flex-start; gap: 10px; }
            .history-score { align-self: flex-end; }
        }
        
        /* Print styles */
        @media print {
            #nav-bar, .modal-overlay, #save-feedback, #scroll-top-btn, .prompt-actions, .controls, button:not(.accordion-header) { display: none !important; }
            body { padding-top: 0; background: white; color: black; }
            .container { max-width: 100%; margin: 0; padding: 0; }
            .module { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; margin-bottom: 20px; }
            .accordion-content { max-height: none !important; opacity: 1 !important; display: block !important; padding: 20px !important; }
            .prompt-box { display: block !important; background: #fff; color: black; border: 1px solid #ccc; }
            .prompt-content { background: #f9f9f9; color: black; }
        }
    </style>
</head>
<body>

    <!-- SCROLL TO TOP -->
    <button id="scroll-top-btn" title="Haut de page"><i class="fas fa-arrow-up"></i></button>

    <!-- MODAL NOM -->
    <div class="modal-overlay" id="nameModal">
        <div class="modal-content">
            <h2>Bienvenue dans votre atelier interactif !</h2>
            <p>Pour personnaliser votre exp√©rience, veuillez entrer votre pr√©nom.</p>
            <input type="text" id="userNameInput" placeholder="Votre pr√©nom">
            <button id="submitNameBtn">Commencer</button>
        </div>
    </div>

    <!-- NAVIGATION BAR -->
    <div id="nav-bar">
        <div id="user-info-top" class="flex-shrink-0">
            <input type="text" id="top-user-prenom" placeholder="Votre Pr√©nom...">
        </div>
        <div id="nav-center">
             <ul><!-- Les ic√¥nes de navigation seront inject√©es ici par JS --></ul>
        </div>
        <div id="nav-right-placeholder" class="flex-shrink-0">
             <div class="nav-utils">
                <div id="nav-dropdown">
                    <button id="nav-dropdown-btn" class="nav-util-btn" title="Sommaire complet"><i class="fas fa-bars"></i></button>
                    <div id="nav-dropdown-content"><!-- Les liens seront inject√©s ici --></div>
                </div>
                <button id="save-data-button" class="nav-util-btn" title="Sauvegarder la session"><i class="fas fa-save"></i></button>
                <button id="load-data-button" class="nav-util-btn" title="Charger la session"><i class="fas fa-upload"></i></button>
                <button id="export-data-button" class="nav-util-btn" title="Exporter les donn√©es (.json)"><i class="fas fa-file-export"></i></button>
                <button id="import-data-button" class="nav-util-btn" title="Importer les donn√©es (.json)"><i class="fas fa-file-import"></i></button>
                <button id="reset-app-button" class="nav-util-btn" title="R√©initialiser l'application"><i class="fas fa-trash-alt" style="color: #c0392b;"></i></button>
                <button id="theme-toggle-btn" class="nav-util-btn" title="Changer de th√®me"><i class="fas fa-moon"></i></button>
                <input type="file" id="file-input" accept=".json" style="display: none;">
            </div>
        </div>
    </div>
    <div id="save-feedback"><i class="fas fa-check-circle"></i> <span>Sauvegarde r√©ussie</span></div>

    <div class="container">
        <header>
            <img src="https://placehold.co/1000x280/0056b3/ffffff?text=Atelier+Senior+:+Exp√©rience+et+Succ√®s" alt="Banni√®re atelier senior" class="illustrative-banner">
            <h1>Atelier Interactif : 50 et +</h1>
            <p>Transforme ton exp√©rience en ton plus grand atout strat√©gique.</p>
        </header>

        <main id="accordionContainer">
            <section id="module0" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module0">
                    <span id="welcome-title">Bienvenue ! Vos Objectifs...</span>
                </button>
                <div id="content-module0" class="accordion-content">
                    <p>Cet atelier est un espace pour vous r√©armer de confiance et d'outils concrets. Nous allons bien au-del√† du simple CV pour transformer votre perception de la recherche d'emploi.</p>
                    <ul style="list-style-type: '‚Ä¢ '; padding-left: 20px;">
                        <li><strong>Reprendre le Pouvoir :</strong> Cesser de subir les pr√©jug√©s pour devenir l'acteur principal de votre carri√®re.</li>
                        <li><strong>Ma√Ætriser votre Discours :</strong> Apprendre √† raconter votre histoire professionnelle de mani√®re percutante et positive.</li>
                        <li><strong>Identifier votre Valeur Ajout√©e Unique :</strong> Mettre en lumi√®re ce que vous seul(e) pouvez apporter √† une entreprise.</li>
                        <li><strong>Construire un Plan d'Action Personnalis√© :</strong> Repartir avec des √©tapes claires, r√©alisables et motivantes.</li>
                    </ul>
                </div>
            </section>

            <section id="moduleContext" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-moduleContext">
                    <span><span class="icon">üìä</span>Le Contexte Actuel : Pourquoi Votre Profil est Plus Pertinent que Jamais</span>
                </button>
                <div id="content-moduleContext" class="accordion-content">
                    <p>Avant de plonger dans les outils, il est essentiel de comprendre le terrain de jeu. Loin des id√©es re√ßues, les chiffres montrent une r√©alit√© encourageante et pleine d'opportunit√©s.</p>
                    
                    <img src="https://placehold.co/900x250/eaf6eb/28a745?text=Seniors+actifs+et+valoris√©s+en+entreprise" alt="Seniors en entreprise" class="module-illustration">

                    <div class="stats-grid">
                        <div class="stat-card" style="border-top-color: var(--success-color);">
                            <h4>Une force de travail en croissance</h4>
                            <p>Le taux d'emploi des 55-64 ans est pass√© de 32% en 2000 √† <span class="stat-highlight">56,9% en 2022</span>. Vous n'√™tes pas une exception, vous √™tes une part croissante et indispensable de l'√©conomie.</p>
                        </div>
                        
                        <div class="stat-card" style="border-top-color: var(--info-color);">
                            <h4>Une tendance de fond</h4>
                            <p>D'ici 2035, <span class="stat-highlight">50% de la population</span> en Europe aura plus de 45 ans. Les entreprises qui ignorent les talents seniors se privent de la moiti√© de leur vivier de comp√©tences.</p>
                        </div>
                        
                        <div class="stat-card" style="border-top-color: var(--accent-color);">
                            <h4>Des atouts reconnus</h4>
                            <p>Une √©tude IPSOS r√©v√®le que recruteurs et candidats s'accordent sur les 3 atouts majeurs des seniors : <span class="stat-highlight">l'exp√©rience, l'expertise et l'autonomie</span>. Ce sont vos piliers.</p>
                        </div>
                    </div>

                    <div class="conseil-box" style="display: flex; gap: 15px; align-items: center;">
                         <span style="font-size: 2em;">üí°</span>
                         <p style="margin: 0;"><strong>La conclusion ?</strong> Le march√© a besoin de vous. Notre mission aujourd'hui n'est pas de vous "vendre" malgr√© votre √¢ge, mais de vous aider √† articuler la valeur immense que votre parcours apporte.</p>
                    </div>
                </div>
            </section>

            <section id="modulePhotoLangage" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-modulePhotoLangage">
                    <span><span class="icon">üì∏</span>Photo-Langage : Se Raconter en Images</span>
                </button>
                <div id="content-modulePhotoLangage" class="accordion-content">
                    <p>Une image vaut mille mots. Utilisez cet espace pour choisir ou importer des photos qui illustrent <strong>votre personnalit√©</strong>, <strong>votre √©tat d'esprit actuel</strong>, ou <strong>votre vision de la place des seniors</strong>.</p>
                    <p><em>Cet outil vous aidera √† vous pr√©senter et √† briser la glace lors de l'atelier.</em></p>
                    
                    <div class="photo-langage-container">
                        <div class="photo-source-section">
                            <h4 style="color: var(--primary-color);">1. Inspiration : Choisissez parmi nos suggestions</h4>
                            <p style="font-size: 0.9em; color: var(--text-muted);">Cliquez sur une image pour l'ajouter √† votre planche.</p>
                            <div class="suggested-photos-grid" id="suggestedPhotosGrid">
                                <img src="https://placehold.co/400x300/FF5733/ffffff?text=Activit√©+et+Joie" class="suggested-photo" data-desc="Activit√© et Joie" alt="Seniors actifs">
                                <img src="https://placehold.co/400x300/33FF57/ffffff?text=Sant√©+:+Soin+et+Exp√©rience" class="suggested-photo" data-desc="Sant√© : Soin et Exp√©rience" alt="Infirmi√®re senior">
                                <img src="https://placehold.co/400x300/3357FF/ffffff?text=Agriculture+:+Terre+et+Racines" class="suggested-photo" data-desc="Agriculture : Terre et Racines" alt="Agriculteur">
                                <img src="https://placehold.co/400x300/FF33A8/ffffff?text=Industrie+:+Pr√©cision+Technique" class="suggested-photo" data-desc="Industrie : Pr√©cision Technique" alt="Femme en usine">
                                <img src="https://placehold.co/400x300/A833FF/ffffff?text=M√©canique+:+Expertise+Manuelle" class="suggested-photo" data-desc="M√©canique : Expertise Manuelle" alt="M√©canicien">
                                <img src="https://placehold.co/400x300/33FFF5/ffffff?text=B√¢timent+:+B√¢tir+l'avenir" class="suggested-photo" data-desc="B√¢timent : B√¢tir l'avenir" alt="Ouvrier chantier">
                                <img src="https://placehold.co/400x300/FF8C33/ffffff?text=Logistique+:+Maillon+essentiel" class="suggested-photo" data-desc="Logistique : Maillon essentiel" alt="Logistique">
                                <img src="https://placehold.co/400x300/8CFF33/ffffff?text=Arm√©e+:+Service+et+Discipline" class="suggested-photo" data-desc="Arm√©e : Service et Discipline" alt="Militaire">
                                <img src="https://placehold.co/400x300/338CFF/ffffff?text=Commerce+:+Relation+Client" class="suggested-photo" data-desc="Commerce : Relation Client" alt="Vente">
                                <img src="https://placehold.co/400x300/FF338C/ffffff?text=Bureau+:+Comp√©tence+avant+tout" class="suggested-photo" data-desc="Bureau : Comp√©tence avant tout" alt="Femme en fauteuil roulant">
                                <img src="https://placehold.co/400x300/8C33FF/ffffff?text=Tech+:+Modernit√©+et+Style" class="suggested-photo" data-desc="Tech : Modernit√© et Style" alt="Femme tatou√©e tech">
                                <img src="https://placehold.co/400x300/33FF8C/ffffff?text=Services+:+L'indispensable" class="suggested-photo" data-desc="Services : L'indispensable" alt="Service nettoyage">
                                <img src="https://placehold.co/400x300/FF5733/ffffff?text=Leadership+:+Transmission" class="suggested-photo" data-desc="Leadership : Transmission" alt="R√©union √©quipe">
                                <img src="https://placehold.co/400x300/33FF57/ffffff?text=Administration+:+Rigueur" class="suggested-photo" data-desc="Administration : Rigueur" alt="Femme au bureau">
                                <img src="https://placehold.co/400x300/3357FF/ffffff?text=Nature+:+S√©r√©nit√©" class="suggested-photo" data-desc="Nature : S√©r√©nit√©" alt="Nature for√™t">
                                <img src="https://placehold.co/400x300/FF33A8/ffffff?text=D√©fis+:+Sommets" class="suggested-photo" data-desc="D√©fis : Sommets" alt="Montagne">
                            </div>
                        </div>

                        <div class="photo-upload-section">
                            <h4 style="color: var(--primary-color);">2. Ou importez vos propres images</h4>
                            <div id="photoDropZone" class="drop-zone">
                                <p style="margin:0;">Glissez une image ici ou <strong>cliquez pour s√©lectionner</strong> un fichier depuis votre appareil.</p>
                                <input type="file" id="photoUploadInput" accept="image/*" style="display:none">
                            </div>
                        </div>

                        <div class="photo-selection-section">
                            <h4 style="color: var(--accent-color); border-bottom: 2px solid var(--accent-color); display: inline-block; padding-bottom: 5px;">3. Ma S√©lection (Photo-Langage)</h4>
                            <p>D√©crivez pourquoi vous avez choisi ces images (un mot-cl√©, une √©motion, un argument contre un st√©r√©otype...).</p>
                            <div id="photoSelectionContainer" class="selection-grid">
                                <div style="grid-column: 1/-1; text-align: center; color: var(--text-muted); padding: 20px; font-style: italic;" id="emptySelectionMsg">
                                    Aucune image s√©lectionn√©e pour le moment.
                                </div>
                            </div>
                        </div>

                        <div class="video-library-section">
                            <h4 style="color: #d35400; border-bottom: 2px solid #d35400; display: inline-block; padding-bottom: 5px;">4. Ma Biblioth√®que Vid√©o & Inspirations</h4>
                            <p>Constituez votre vid√©oth√®que : tutoriels, conf√©rences inspirantes, t√©moignages. Ajoutez des liens YouTube ou choisissez parmi nos suggestions.</p>
                            
                            <div class="video-input-group">
                                <input type="text" id="videoUrlInput" placeholder="Collez un lien YouTube ici (ex: https://www.youtube.com/watch?v=...)">
                                <button id="addVideoBtn" class="button-like" style="background-color: #d35400; color: white;">+ Ajouter la vid√©o</button>
                            </div>
                            
                            <div id="userVideoContainer" class="video-grid">
                                <div style="grid-column: 1/-1; text-align: center; color: var(--text-muted); padding: 20px; font-style: italic;" id="emptyVideoMsg">
                                    Aucune vid√©o ajout√©e. Commencez par en ajouter une ou choisissez une suggestion ci-dessous.
                                </div>
                            </div>

                            <div class="video-suggestions" style="margin-top: 30px; background: var(--light-bg); padding: 15px; border-radius: 8px;">
                                <h5 style="color: #d35400; margin-top: 0;">üì∫ Suggestions "Inspiration & Emploi Senior" (YouTube France)</h5>
                                <p style="font-size: 0.9em;">Cliquez sur une vid√©o pour l'ajouter √† votre biblioth√®que et la visionner.</p>
                                <div class="suggested-videos-list" id="suggestedVideosList">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="module1" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module1">
                     <span id="module1-title"><span class="icon">üéØ</span>Ton Diagnostic Personnel</span>
                </button>
                <div id="content-module1" class="accordion-content">
                    <p>Commen√ßons par un √©tat des lieux honn√™te. Cet outil est ton miroir : il t'aidera √† voir clairement tes forces et les domaines o√π tu peux progresser. Il n'y a ni bonne ni mauvaise r√©ponse.</p>
                    
                    <article class="questionnaire-item">
                        <h4>Confiance et √âtat d'Esprit</h4>
                        <p><strong>1. Sur une √©chelle de 1 √† 10, quel est ton niveau de confiance en ta capacit√© √† retrouver un emploi qui te correspond ?</strong><br><em>(Pourquoi c'est important : La confiance est contagieuse. Si tu crois en toi, le recruteur sera plus enclin √† le faire aussi.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="confidenceSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="confidenceValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>2. Sur une √©chelle de 1 √† 10, comment √©values-tu ta r√©silience face aux d√©fis (silence, refus) ?</strong><br><em>(Pourquoi c'est important : La r√©silience est la cl√© pour durer et ne pas se d√©courager.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="resilienceSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="resilienceValue">5</span>
                        </div>
                    </article>

                    <h4>Valorisation et Discours</h4>
                    <article class="questionnaire-item">
                        <p><strong>3. Sur une √©chelle de 1 √† 10, √† quel point es-tu au clair sur tes 3 plus grandes forces / comp√©tences-cl√©s ?</strong><br><em>(Pourquoi c'est important : Si tu ne sais pas ce que tu vends, personne ne l'ach√®tera.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="valueSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="valueValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>4. Sur une √©chelle de 1 √† 10, quelle est ton aisance √† illustrer tes comp√©tences par des exemples concrets (m√©thode STAR) ?</strong><br><em>(Pourquoi c'est important : Les preuves sont plus puissantes que les affirmations.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="storytellingSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="storytellingValue">5</span>
                        </div>
                    </article>

                    <h4>Strat√©gie et Outils</h4>
                    <article class="questionnaire-item">
                        <p><strong>5. Sur une √©chelle de 1 √† 10, quelle note donnerais-tu √† la pertinence et au modernisme de ton CV actuel ?</strong><br><em>(Pourquoi c'est important : C'est ta premi√®re impression. Il doit √™tre une bande-annonce all√©chante de tes comp√©tences.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="cvSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="cvValue">5</span>
                        </div>
                    </article>

                    <article class="questionnaire-item">
                        <p><strong>6. Sur une √©chelle de 1 √† 10, √©value ton utilisation strat√©gique de ton r√©seau professionnel.</strong><br><em>(Pourquoi c'est important : Plus de 70% des postes sont pourvus via le march√© cach√©. Ton r√©seau est ta porte d'entr√©e.)</em></p>
                        <div class="slider-container">
                            <span>1</span><input type="range" id="networkSlider" min="1" max="10" value="5"><span>10</span><span class="slider-value" id="networkValue">5</span>
                        </div>
                    </article>
                    <div class="action-box">
                        <h4 id="analysis-title">üí° Premi√®re Analyse et Premier Pas</h4>
                        <p>Regarde tes scores ci-dessous. C√©l√®bre tes points forts ! Pour les scores plus bas, consid√®re-les non pas comme des faiblesses, mais comme tes plus grandes opportunit√©s de progression.</p>
                        
                        <div class="chart-container">
                            <canvas id="scoreChart"></canvas>
                        </div>
                        
                        <div style="text-align: center; margin-top: 15px;">
                            <button id="saveSnapshotBtn" class="button-like" style="background-color: var(--secondary-color); color: white;">üì∏ Enregistrer ce diagnostic dans mon suivi</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="module2" class="module">
                 <button class="accordion-header" aria-expanded="false" aria-controls="content-module2">
                    <span><span class="icon">üß†</span>D√©coder le March√© et Transformer les Perceptions</span>
                </button>
                <div id="content-module2" class="accordion-content">
                    <p>C'est ici que nous effectuons le travail le plus important : changer ta perspective. Nous allons prendre chaque id√©e re√ßue et la transformer en une preuve de ta valeur.</p>
                    
                    <div class="info-box">
                         <h3>Le Tableau de Transformation : Des St√©r√©otypes aux Atouts Strat√©giques</h3>
                         <p>Voici comment "recadrer" les craintes les plus communes des recruteurs.</p>
                         <table class="transformation-table">
                            <thead>
                                <tr>
                                    <th>St√©r√©otype / Crainte du Recruteur</th>
                                    <th>Ta R√©alit√© / Ton Atout Strat√©gique</th>
                                </tr>
                            </thead>
                             <tbody>
                                 <tr>
                                     <td>"Il/Elle sera r√©sistant(e) au changement."</td>
                                     <td><strong>Adaptabilit√© √âprouv√©e :</strong> Tu as v√©cu de multiples changements (technologiques, organisationnels, √©conomiques). Ta capacit√© d'adaptation n'est pas th√©orique, elle est prouv√©e par des d√©cennies de carri√®re.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle va co√ªter cher."</td>
                                     <td><strong>Rentabilit√© Imm√©diate :</strong> Ton autonomie rapide, ton expertise et ta capacit√© √† √©viter les erreurs de d√©butant repr√©sentent un gain de temps et d'argent consid√©rable pour l'entreprise. Tu es un investissement, pas un co√ªt.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle aura du mal avec un manager plus jeune."</td>
                                     <td><strong>Intelligence Relationnelle :</strong> Tu sais collaborer et faire r√©ussir ton manager, quel que soit son √¢ge. Ton objectif est la r√©ussite du projet, pas les questions d'ego. Tu peux m√™me devenir un mentor discret.</td>
                                 </tr>
                                 <tr>
                                     <td>"Il/Elle n'est pas √† jour technologiquement."</td>
                                     <td><strong>Apprentissage Cibl√© :</strong> Tu sais apprendre ce qui est utile et pertinent pour le poste, sans te disperser. Tu te formes pour r√©soudre des probl√®mes concrets, ce qui est un gage d'efficacit√©.</td>
                                 </tr>
                             </tbody>
                         </table>
                    </div>

                     <div class="exemples-box">
                        <h3>Atelier : L'Argumentaire "Anti-Pr√©jug√©s" ‚Äì Tes R√©ponses Cl√©s</h3>
                        
                        <p><strong>Question 1 : "Nous avons une √©quipe tr√®s jeune et dynamique. Pensez-vous pouvoir vous y int√©grer ?"</strong></p>
                        <ul>
                            <li><strong>R√©ponse "Collaboration" :</strong> "J'appr√©cie √©norm√©ment la collaboration interg√©n√©rationnelle. Dans mon exp√©rience, la confrontation des id√©es entre des profils exp√©riment√©s et des visions plus nouvelles est ce qui cr√©e le plus de valeur. Je suis curieux d'apprendre de leur agilit√© et je peux leur apporter mon recul sur des situations complexes."</li>
                            <li><strong>R√©ponse "Focus Projet" :</strong> "Pour moi, l'√¢ge n'est pas un sujet. Ce qui compte, c'est la comp√©tence, le respect mutuel et l'objectif commun. J'ai toujours travaill√© avec des personnes de tous √¢ges et ce qui nous a toujours unis, c'est la volont√© de faire avancer le projet."</li>
                        </ul>

                        <p><strong>Question 2 : "Ce poste implique d'utiliser de nouveaux logiciels que vous ne connaissez pas. N'est-ce pas un probl√®me ?"</strong></p>
                         <ul>
                            <li><strong>R√©ponse "Preuve par l'Exemple" :</strong> "C'est une excellente question. Au cours de ma carri√®re, j'ai vu arriver l'email, Internet, les CRM... √Ä chaque fois, je me suis form√© rapidement. Par exemple, chez [Ancienne entreprise], j'ai d√ª ma√Ætriser le logiciel [Nom du logiciel] en moins de deux semaines pour un projet crucial. Ma m√©thode est simple : je me concentre sur l'essentiel et je pratique. Je suis confiant dans ma capacit√© √† ma√Ætriser vos outils."</li>
                            <li><strong>R√©ponse "Motivation" :</strong> "Au contraire, c'est une source de motivation ! Apprendre de nouveaux outils est ce qui permet de rester pertinent et efficace. Je suis tr√®s curieux de d√©couvrir les v√¥tres et de voir comment ils peuvent optimiser mon travail."</li>
                        </ul>
                    </div>
                    <div class="practice-box">
                        <h3 id="practice-title">√Ä toi de jouer !</h3>
                        <p><strong>Situation :</strong> L'intervieweur te dit : <em>"Votre dernier poste remonte √† plus d'un an, pourquoi cette longue p√©riode d'inactivit√© ?"</em></p>
                        <p>C'est ta chance de transformer une potentielle faiblesse en force. Comment r√©ponds-tu ?</p>
                        <textarea id="practiceResponse" placeholder="R√©dige ici ta r√©ponse en mettant en avant ce que tu as fait de positif pendant cette p√©riode (formation, veille, projets personnels...)..."></textarea>
                        <button id="generatePracticeResponseBtn" class="button-like" style="background-color: var(--secondary-color); color: white; display: block; margin: 15px 0 0 0;">
                            G√©n√©rer le prompt pour obtenir une r√©ponse mod√®le
                        </button>
                         <div id="practiceResponseResultContainer" class="prompt-box">
                            <span class="prompt-label">Prompt √† copier :</span>
                            <div id="practiceResponsePrompt" class="prompt-content"></div>
                            <div class="prompt-actions">
                                <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('practiceResponsePrompt')">üìã Copier le Prompt</button>
                                <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="module3" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module3">
                    <span><span class="icon">üõ†Ô∏è</span>Ta Bo√Æte √† Outils Concr√®te</span>
                </button>
                <div id="content-module3" class="accordion-content">
                    <h3>Outil 1 : R√©volutionne ton CV ‚Äì L'approche "Avant / Apr√®s"</h3>
                    <p>Ton CV ne doit pas √™tre un historique, mais une promesse de valeur. Passe du descriptif √† l'impact.</p>
                    <div class="conseil-box">
                        <table class="transformation-table">
                            <thead>
                                <tr>
                                    <th>Version "Avant" (descriptive)</th>
                                    <th>Version "Apr√®s" (orient√©e r√©sultats)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>- Gestion du portefeuille clients.</td>
                                    <td>- <strong>D√©veloppement et fid√©lisation</strong> d'un portefeuille de 50 clients grands comptes, <strong>augmentant le chiffre d'affaires de 12% en un an</strong>.</td>
                                </tr>
                                <tr>
                                    <td>- Organisation d'√©v√©nements.</td>
                                    <td>- <strong>Pilotage de l'organisation</strong> de 5 s√©minaires annuels (budget 80k‚Ç¨), <strong>am√©liorant la satisfaction des participants de 25%</strong> via un nouveau format.</td>
                                </tr>
                                <tr>
                                    <td>- En charge de la comptabilit√© fournisseurs.</td>
                                    <td>- <strong>Optimisation du processus</strong> de traitement des factures fournisseurs, <strong>r√©duisant les d√©lais de paiement de 15 jours</strong> et am√©liorant les relations avec les partenaires cl√©s.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="conseil-box">
                        <h4>Liste de Verbes d'Action pour t'inspirer</h4>
                        <ul style="list-style-type: '‚Üí '; padding-left: 20px;">
                            <li><strong>Pour le leadership :</strong> Piloter, Coordonner, Superviser, F√©d√©rer, Orchestrer, Animer, Inspirer...</li>
                            <li><strong>Pour l'am√©lioration :</strong> Optimiser, R√©duire, Augmenter, Am√©liorer, Rationaliser, Simplifier, Fiabiliser...</li>
                            <li><strong>Pour la cr√©ation :</strong> D√©velopper, Concevoir, Mettre en place, Cr√©er, Lancer, Initier, B√¢tir, Structurer...</li>
                        </ul>
                    </div>

                    <div class="star-generator-section" style="background: var(--content-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 25px; margin: 30px 0; box-shadow: 0 4px 10px rgba(0,0,0,0.03);">
                        <div style="display: flex; align-items: center; margin-bottom: 20px;">
                            <span style="font-size: 2em; margin-right: 10px;">‚ú®</span>
                            <h3 style="margin: 0; color: var(--secondary-color);">G√©n√©rateur de Phrases STAR Interactif</h3>
                        </div>
                        
                        <img src="https://placehold.co/800x150/fff8e1/fd7e14?text=M√©thode+STAR+:+Situation,+T√¢che,+Action,+R√©sultat" alt="M√©thode STAR illustration" class="module-illustration" style="height: 150px;">


                        <p style="margin-bottom: 20px;">Utilisez ce formulaire pour construire vos preuves de r√©ussite.</p>
                        
                        <div class="info-box" style="background-color: var(--light-bg); border-left: 4px solid var(--primary-color); margin-bottom: 25px;">
                            <strong>L'apport p√©dagogique : La M√©thode STAR</strong>
                            <p style="margin: 10px 0 0 0;">La m√©thode STAR structure vos exp√©riences pour les rendre irr√©futables :</p>
                            <ul style="margin: 10px 0 0 20px;">
                                <li><strong>S (Situation) :</strong> Le contexte de d√©part.</li>
                                <li><strong>T (T√¢che) :</strong> Votre objectif ou responsabilit√©.</li>
                                <li><strong>A (Action) :</strong> Ce que VOUS avez fait (verbes d'action).</li>
                                <li><strong>R (R√©sultat) :</strong> L'impact concret (chiffres, am√©lioration).</li>
                            </ul>
                        </div>

                        <div class="star-form">
                            <div style="margin-bottom: 15px;">
                                <label for="starS" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">S (Situation) : Quel √©tait le probl√®me ?</label>
                                <input type="text" id="starS" placeholder="Ex: Baisse des ventes de 15% sur la r√©gion Est." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="starT" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">T (T√¢che) : Quel √©tait l'objectif ?</label>
                                <input type="text" id="starT" placeholder="Ex: Redresser la barre en 6 mois." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="starA" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">A (Action) : Qu'avez-vous fait concr√®tement ?</label>
                                <input type="text" id="starA" placeholder="Ex: R√©organisation des tourn√©es et formation de 2 juniors." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <label for="starR" style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--text-color);">R (R√©sultat) : Chiffres ou impact qualitatif ?</label>
                                <input type="text" id="starR" placeholder="Ex: +18% de CA et satisfaction client en hausse." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                            
                            <button id="generateStarBtn" class="button-like" style="background-color: var(--secondary-color); color: white; width: 100%; padding: 15px; font-size: 1.1em;">G√©n√©rer ma phrase impactante</button>
                        </div>

                        <div id="starResult" style="display: none; margin-top: 25px; background: var(--light-bg); padding: 20px; border-radius: 8px; border: 1px solid var(--success-color);">
                            <div id="starOutput" style="color: var(--text-color); line-height: 1.6;"></div>
                            <div style="margin-top: 15px; text-align: right;">
                                <button id="copyStarBtn" style="background: none; border: none; color: var(--primary-color); cursor: pointer; font-weight: 600; text-decoration: underline;">Copier le texte</button>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Outil 2 : Entra√Ænez-vous √† la m√©thode "Avant / Apr√®s"</h3>
                    <p>Transforme une simple t√¢che en un r√©sultat quantifiable. Utilise cet atelier pour t'entra√Æner.</p>
                    <div class="star-practice-container">
                        <div id="starPracticeRows">
                            </div>
                        <button id="addStarRowBtn" class="button-like" style="background-color: var(--primary-color); color: white; margin-top: 15px;">+ Ajouter un exemple</button>
                    </div>

                    <h3>Outil 3 : Le R√©seautage Facile ‚Äì Mod√®les de Messages</h3>
                    <p>La peur de la page blanche est le premier frein au r√©seautage. Voici des mod√®les pour briser la glace.</p>
                    <div class="exemples-box">
                        <h4>Mod√®le 1 : Contacter un ancien coll√®gue (LinkedIn ou email)</h4>
                        <div class="message-template" style="background-color: var(--content-bg); padding: 15px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word;">Bonjour [Pr√©nom],<br><br>J'esp√®re que tu vas bien. Je suis tomb√© sur ton profil et j'ai vu avec plaisir ton √©volution chez [Entreprise actuelle]. F√©licitations !<br><br>De mon c√¥t√©, je suis actuellement en recherche active d'un poste de [Type de poste]. Connaissant bien mon travail chez [Ancienne entreprise commune], je serais ravi d'avoir ton avis sur mon projet et si, par hasard, tu entendais parler d'opportunit√©s dans ton r√©seau.<br><br>Serait-il possible de s'appeler 15 minutes la semaine prochaine ?<br><br>Au plaisir d'avoir de tes nouvelles,<br>[Ton Nom]</div>

                        <h4 style="margin-top: 30px;">Mod√®le 2 : Contacter une personne inconnue dans une entreprise cible</h4>
                        <div class="message-template" style="background-color: var(--content-bg); padding: 15px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word;">Bonjour [Pr√©nom Nom],<br><br>Je me permets de vous contacter car votre parcours chez [Entreprise cible] est particuli√®rement inspirant. Je suis moi-m√™me [Votre profession] avec une solide exp√©rience dans [Votre secteur/comp√©tence cl√©] et je suis tr√®s admiratif de [mentionner un projet, une valeur de l'entreprise].<br><br>Je ne souhaite pas vous d√©ranger avec une candidature, mais j'aimerais beaucoup b√©n√©ficier de votre regard d'expert. Accepteriez-vous un bref √©change de 15 minutes pour me parler des d√©fis actuels de votre secteur ?<br><br>En vous remerciant pour votre temps,<br>Cordialement,<br>[Ton Nom]</div>
                    </div>
                    
                    <h3>Outil 4 : Optimise ton Profil LinkedIn en 5 Points Cl√©s</h3>
                    <p>Ton profil LinkedIn est ta vitrine professionnelle permanente. Assure-toi qu'il soit impeccable avec cette checklist interactive.</p>
                    <div class="conseil-box">
                        <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck1">
                            <label for="linkedinCheck1"><strong>Mon titre est une promesse, pas un statut.</strong> Il doit dire ce que tu apportes, pas seulement ce que tu es. (Ex: "Sp√©cialiste en logistique internationale | Optimisation des flux et r√©duction des co√ªts" plut√¥t que "En recherche d'emploi").</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck2">
                            <label for="linkedinCheck2"><strong>Ma section "infos" est un pitch percutant.</strong> Elle doit raconter ton histoire, tes comp√©tences cl√©s et ce que tu recherches, en utilisant les mots-cl√©s de ton secteur.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck3">
                            <label for="linkedinCheck3"><strong>Mes exp√©riences sont illustr√©es par des r√©ussites chiffr√©es.</strong> Comme pour le CV, utilise la m√©thode "Apr√®s" pour chaque poste significatif.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck4">
                            <label for="linkedinCheck4"><strong>J'ai au moins 3 recommandations r√©centes.</strong> Sollicite poliment d'anciens coll√®gues ou managers. Une recommandation est une preuve sociale puissante.</label>
                        </div>
                         <div class="checklist-item">
                            <input type="checkbox" id="linkedinCheck5">
                            <label for="linkedinCheck5"><strong>Mon profil est actif.</strong> Je commente ou partage du contenu pertinent au moins une fois par semaine pour rester visible aupr√®s de mon r√©seau.</label>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="module4" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module4">
                    <span><span class="icon">‚úçÔ∏è</span>Ton Plan d'Action Personnalis√©</span>
                </button>
                 <div id="content-module4" class="accordion-content">
                    <p>La transformation commence par le premier pas. D√©finis tes propres actions, sauvegarde-les, et coche-les une fois r√©alis√©es. C'est ta feuille de route vers le succ√®s.</p>
                    <div class="action-box">
                        <h3>Mes Prochains Pas Strat√©giques</h3>
                        <div class="action-item"><input type="checkbox" id="action1_check"><textarea id="action1_text" placeholder="Ex: D'ici [Date], r√©√©crire ma section 'R√©sum√©' sur LinkedIn en utilisant la m√©thode du recadrage pour mettre en avant ma s√©r√©nit√© face √† la pression."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action2_check"><textarea id="action2_text" placeholder="Ex: D'ici [Date], identifier 3 r√©ussites chiffrables de mon dernier poste et les int√©grer √† mon CV."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action3_check"><textarea id="action3_text" placeholder="Ex: D'ici [Date], envoyer 2 messages de r√©seautage authentique en utilisant les mod√®les ci-dessus."></textarea></div>
                        <div class="action-item"><input type="checkbox" id="action4_check"><textarea id="action4_text" placeholder="Ex: Planifier une activit√© ressour√ßante cette semaine (sans lien avec la recherche d'emploi) pour maintenir mon √©nergie."></textarea></div>
                    </div>
                 </div>
            </section>
            
            <section id="module5" class="module">
                 <button class="accordion-header" aria-expanded="false" aria-controls="content-module5">
                    <span><span class="icon">üìÜ</span>Historique de ta Progression</span>
                </button>
                 <div id="content-module5" class="accordion-content">
                    <p>Retrouve ici les dates de tes pr√©c√©dents diagnostics pour mesurer le chemin parcouru.</p>
                    
                    <div class="chart-container">
                        <canvas id="historyChart"></canvas>
                    </div>

                    <div class="action-box">
                        <h4>Tes Enregistrements</h4>
                        <div id="snapshotHistory" style="margin-top: 20px;"></div>
                        <!-- NOUVEAU BOUTON POUR EFFACER L'HISTORIQUE -->
                        <button id="clearHistoryBtn" class="button-like" style="background-color: #dc3545; color: white; margin-top: 20px;">üóëÔ∏è Effacer l'historique</button>
                    </div>
                </div>
            </section>

             <section id="module6" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module6">
                    <span><span class="icon">ü§ñ</span>Ton Assistant Carri√®re IA</span>
                </button>
                <div id="content-module6" class="accordion-content">
                    <h3>Outil 1 : Analyse et Am√©lioration de CV par l'IA</h3>
                    <p>Collez le contenu de votre CV actuel ci-dessous ou d√©posez un fichier. Notre g√©n√©rateur de prompt cr√©era une commande experte √† envoyer √† l'IA pour analyser et r√©√©crire votre CV.</p>
                    
                    <img src="https://placehold.co/800x200/f0f0f0/0056b3?text=Analyse+Intelligente+de+votre+CV+par+l'IA" alt="IA analyse CV" class="module-illustration" style="height: 150px; object-fit: cover;">

                    <div class="action-box">
                         <div id="cvDropZone" class="drop-zone">
                            <p>Glissez-d√©posez un fichier (PDF, Word, Txt) ici, ou collez le texte de votre CV ci-dessous.</p>
                        </div>
                        <div id="cvDropStatus" class="drop-status"></div>
                        <textarea id="cvInputArea" placeholder="Collez ici l'int√©gralit√© du texte de votre CV..." style="width: 100%; min-height: 250px; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-family: 'Poppins', sans-serif; margin-top: 15px;"></textarea>
                        <button id="analyzeCvBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 15px auto 0 auto;">
                            üöÄ G√©n√©rer le Prompt d'Analyse de CV
                        </button>
                    </div>

                    <div id="cvAnalysisResultContainer" class="prompt-box">
                        <span class="prompt-label">Prompt √† copier pour l'analyse CV :</span>
                        <div id="cvAnalysisPrompt" class="prompt-content"></div>
                        <div class="prompt-actions">
                            <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('cvAnalysisPrompt')">üìã Copier le Prompt</button>
                            <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                        </div>
                    </div>


                    <h3 style="margin-top: 40px;">Outil 2 : Plan de Formation sur Mesure par l'IA</h3>
                    <p>Sur la base de votre diagnostic, demandez √† l'IA de vous construire un plan pour monter en comp√©tences.</p>
                    <div class="action-box">
                        <h4>Quelles comp√©tences souhaitez-vous renforcer ?</h4>
                        <textarea id="trainingFocus" placeholder="Ex: Am√©liorer ma pr√©sence sur LinkedIn et moderniser mon CV..."></textarea>
                        <button id="generateTrainingPlanBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 15px auto 0 auto;">
                            üí° G√©n√©rer le Prompt du Plan de Formation
                        </button>
                    </div>

                    <div id="trainingPlanResultContainer" class="prompt-box">
                         <span class="prompt-label">Prompt √† copier pour le plan de formation :</span>
                         <div id="trainingPlanPrompt" class="prompt-content"></div>
                         <div class="prompt-actions">
                            <button class="button-like" style="background-color: var(--info-color); color: white;" onclick="copyToClipboard('trainingPlanPrompt')">üìã Copier le Prompt</button>
                            <button class="button-like" style="background-color: #8e44ad; color: white;" onclick="openGemini()">üöÄ Ouvrir Gemini</button>
                        </div>
                    </div>
                </div>
            </section>

             <section id="module7" class="module">
                <button class="accordion-header" aria-expanded="false" aria-controls="content-module7">
                    <span><span class="icon">üöÄ</span>Ton Coaching Final par l'IA</span>
                </button>
                <div id="content-module7" class="accordion-content">
                     <h3>üéâ Bravo ! Tu es maintenant pr√™t(e) pour l'√©tape suivante : le coaching par l'IA</h3>
                     <div class="info-box">
                        <p>F√©licitations pour avoir compl√©t√© cet atelier ! Tu as maintenant une vision claire de tes forces et de tes axes de d√©veloppement. Pour aller plus loin, nous avons pr√©par√© un "prompt" (une instruction) sur mesure pour une IA comme Gemini, bas√© sur tes propres r√©sultats au diagnostic.</p>
                        <p>Copie ce prompt et colle-le dans une conversation avec Gemini pour recevoir un plan de coaching et de formation ultra-personnalis√©, cr√©√© juste pour toi.</p>
                     </div>
                     <button id="generatePromptBtn" class="button-like" style="background-color: var(--primary-color); color: white; display: block; margin: 20px auto;">G√©n√©rer mon prompt de coaching personnalis√©</button>
                     
                     <div id="promptResultContainer" class="prompt-box">
                        <span class="prompt-label">Ton Prompt de Coaching Final :</span>
                        <pre id="finalPrompt" class="prompt-content"></pre>
                        <div class="prompt-actions">
                            <button id="copyPromptBtn" class="button-like" style="background-color: var(--info-color); color: white;">üìã Copier le Prompt</button>
                            <button id="launchGeminiBtn" class="button-like" style="background-color: #8e44ad; color: white;">üöÄ Lancer mon coaching sur Gemini</button>
                        </div>
                     </div>
                </div>
            </section>

        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const APP_STORAGE_KEY = 'interactiveWorkshopSeniors_vComplete';
    
    // --- √âl√©ments du DOM ---
    const nameModal = document.getElementById('nameModal');
    const userNameInput = document.getElementById('userNameInput');
    const submitNameBtn = document.getElementById('submitNameBtn');
    const navBar = document.getElementById('nav-bar');
    const navList = navBar.querySelector('ul');
    const navDropdownContent = document.getElementById('nav-dropdown-content');
    const navDropdownBtn = document.getElementById('nav-dropdown-btn');
    const themeToggleBtn = document.getElementById('theme-toggle-btn');
    const topUserPrenomInput = document.getElementById('top-user-prenom');
    const saveFeedback = document.getElementById('save-feedback');
    const saveDataButton = document.getElementById('save-data-button');
    const loadDataButton = document.getElementById('load-data-button');
    const exportDataButton = document.getElementById('export-data-button');
    const importDataButton = document.getElementById('import-data-button');
    const resetAppButton = document.getElementById('reset-app-button');
    const fileInput = document.getElementById('file-input');
    const accordionContainer = document.getElementById('accordionContainer');
    const modules = Array.from(accordionContainer.querySelectorAll('.module'));
    const allSliders = document.querySelectorAll('input[type="range"]');
    const photoUploadInput = document.getElementById('photoUploadInput');
    const photoDropZone = document.getElementById('photoDropZone');
    const photoSelectionContainer = document.getElementById('photoSelectionContainer');
    const videoUrlInput = document.getElementById('videoUrlInput');
    const addVideoBtn = document.getElementById('addVideoBtn');
    const userVideoContainer = document.getElementById('userVideoContainer');
    const suggestedVideosList = document.getElementById('suggestedVideosList');
    const starPracticeRowsContainer = document.getElementById('starPracticeRows');
    const addStarRowBtn = document.getElementById('addStarRowBtn');
    const saveSnapshotBtn = document.getElementById('saveSnapshotBtn');
    const clearHistoryBtn = document.getElementById('clearHistoryBtn');
    const scrollTopBtn = document.getElementById('scroll-top-btn');
    
    const generateStarBtn = document.getElementById('generateStarBtn');
    const starResult = document.getElementById('starResult');
    const starOutput = document.getElementById('starOutput');
    const copyStarBtn = document.getElementById('copyStarBtn');
    
    // Prompt buttons
    const generatePracticeResponseBtn = document.getElementById('generatePracticeResponseBtn');
    const analyzeCvBtn = document.getElementById('analyzeCvBtn');
    const generateTrainingPlanBtn = document.getElementById('generateTrainingPlanBtn');
    const generatePromptBtn = document.getElementById('generatePromptBtn');
    
    // --- Variables d'√©tat ---
    let myScoreChart, historyChart;
    let selectedPhotos = [];
    let selectedVideos = [];
    let starRowCounter = 0;
    let saveTimeout;
    
    // Icons configuration
    const moduleIcons = {
        "module0": "fa-bullseye", 
        "moduleContext": "fa-chart-line", 
        "modulePhotoLangage": "fa-camera-retro", 
        "module1": "fa-magnifying-glass-chart", 
        "module2": "fa-lightbulb", 
        "module3": "fa-toolbox", 
        "module4": "fa-list-check", 
        "module5": "fa-timeline", 
        "module6": "fa-robot", 
        "module7": "fa-rocket"
    };
    
    // Video suggestions
    const suggestedVideosData = [
        { id: 'mwKITSYbCec', title: 'Seniors : Quels atouts pour l\'entreprise ?' },
        { id: 'UvLuWcx53lk', title: 'Trouver un emploi apr√®s 50 ans' },
        { id: 've_t1Eo-eYU', title: 'Convaincre un recruteur quand on est senior' },
        { id: 'fLLtubsrCCk', title: 'Valoriser son exp√©rience : les cl√©s' },
        { id: 'rQ5EPt2vRRY', title: 'Coaching : Rebondir apr√®s 45/50 ans' },
        { id: 'MHoEZkPw3uk', title: 'Seniors et Emploi : Stop aux clich√©s' }
    ];

    // --- Fonctions globales et utilitaires ---
    function showFeedback(message, isError = false, duration = 3000) {
        saveFeedback.innerHTML = `<i class="fas ${isError ? 'fa-exclamation-circle' : 'fa-check-circle'}"></i> <span>${message}</span>`;
        saveFeedback.style.backgroundColor = isError ? '#dc3545' : '#28a745';
        saveFeedback.classList.add('show');
        setTimeout(() => saveFeedback.classList.remove('show'), duration);
    }
    window.copyToClipboard = (elementId) => { 
        const text = document.getElementById(elementId).innerText; 
        navigator.clipboard.writeText(text).then(() => showFeedback('Prompt copi√© !')).catch(() => alert('Erreur de copie, veuillez s√©lectionner le texte manuellement.'));
    };
    window.openGemini = () => window.open('https://gemini.google.com/', '_blank');

    // --- Scroll To Top ---
    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) scrollTopBtn.classList.add('visible');
        else scrollTopBtn.classList.remove('visible');
    });
    scrollTopBtn.addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));

    // --- Gestion de la Navigation et de l'UI ---
    function populateNav() {
        if (!navList) return;
        navList.innerHTML = '';
        modules.forEach(module => {
            const iconClass = moduleIcons[module.id] || 'fa-question-circle';
            const title = module.querySelector('.accordion-header')?.textContent.trim() || module.id;
            navList.innerHTML += `<li><a href="#${module.id}" title="${title}"><i class="fas ${iconClass}"></i></a></li>`;
        });
    }

    function populateDropdown() {
        if (!navDropdownContent) return;
        navDropdownContent.innerHTML = '';
        modules.forEach(module => {
            const title = module.querySelector('.accordion-header')?.textContent.trim() || module.id;
            navDropdownContent.innerHTML += `<a href="#${module.id}">${title}</a>`;
        });
    }
    
    function handleNavLinkClick(e) {
        e.preventDefault();
        const targetId = e.currentTarget.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
            if (!targetElement.classList.contains('active')) {
                modules.forEach(m => m.classList.remove('active'));
                targetElement.classList.add('active');
            }
            targetElement.scrollIntoView({ behavior: 'smooth' });
            if (navDropdownContent.classList.contains('show')) navDropdownContent.classList.remove('show');
        }
    }
    
    function updateNavHighlight() {
        let currentSectionId = '';
        const offset = navBar.offsetHeight + 100;
        modules.forEach(section => { if (window.scrollY >= section.offsetTop - offset) { currentSectionId = section.id; } });
        navList.querySelectorAll('a').forEach(link => { link.classList.toggle('active', link.getAttribute('href') === `#${currentSectionId}`); });
    }

    function setDarkTheme(isDark) {
        document.body.classList.toggle('dark-mode', isDark);
        themeToggleBtn.innerHTML = `<i class="fas fa-${isDark ? 'sun' : 'moon'}"></i>`;
        initializeChart();
        initializeHistoryChart();
    }

    // --- Gestion de l'Accord√©on ---
    function toggleAccordion(moduleEl) {
        const wasActive = moduleEl.classList.contains('active');
        modules.forEach(m => m.classList.remove('active'));
        if (!wasActive) moduleEl.classList.add('active');
    }

    // --- Fonctions de l'atelier ---
    function personalizeContent(name) {
        if (!name) return;
        const welcomeTitle = document.getElementById('welcome-title');
        const module1Title = document.getElementById('module1-title');
        const analysisTitle = document.getElementById('analysis-title');
        const practiceTitle = document.getElementById('practice-title');

        if(welcomeTitle) welcomeTitle.innerHTML = `Bienvenue ${name} ! Vos Objectifs...`;
        if(module1Title) module1Title.innerHTML = `<span class="icon">üéØ</span>Ton Diagnostic Personnel, ${name}`;
        if(analysisTitle) analysisTitle.innerHTML = `üí° ${name}, ta Premi√®re Analyse`;
        if(practiceTitle) practiceTitle.innerHTML = `√Ä toi de jouer, ${name} !`;
    }
    
    // --- Gestion des Donn√©es (Sauvegarde, Chargement, Export...) ---
    function collectData() {
        const data = {
            userName: topUserPrenomInput.value.trim(), 
            inputs: {}, 
            photos: selectedPhotos, 
            videos: selectedVideos,
            starRows: [], 
            scoreHistory: JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]')
        };
        document.querySelectorAll('textarea, input:not([type="file"]):not(#top-user-prenom):not(#userNameInput)').forEach(el => {
            if(el.id) data.inputs[el.id] = el.type === 'checkbox' ? el.checked : el.value;
        });
        document.querySelectorAll('.star-practice-row').forEach(row => {
            data.starRows.push({ before: row.querySelector('.star-before')?.value, after: row.querySelector('.star-after')?.value });
        });
        return data;
    }

    function renderData(data) {
        if (!data) return;
        if (data.userName) { topUserPrenomInput.value = data.userName; personalizeContent(data.userName); }
        if(data.inputs) {
            Object.keys(data.inputs).forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    if (el.type === 'checkbox') el.checked = data.inputs[id]; else el.value = data.inputs[id];
                    if (el.type === 'range') updateSliderValue(el);
                }
            });
        }
        selectedPhotos = data.photos || []; 
        selectedVideos = data.videos || [];
        if (data.starRows) {
            starPracticeRowsContainer.innerHTML = '';
            data.starRows.forEach(row => addStarPracticeRow(row.before, row.after));
        }
        if (data.scoreHistory) localStorage.setItem('workshopScoreHistory', JSON.stringify(data.scoreHistory));
        renderSelectedPhotos(); 
        renderUserVideos(); 
        initializeChart(); 
        initializeHistoryChart();
    }

    function scheduleSave() { clearTimeout(saveTimeout); saveTimeout = setTimeout(() => saveToLocalStorage(false), 1500); }
    const saveToLocalStorage = (feedback = true) => { try { localStorage.setItem(APP_STORAGE_KEY, JSON.stringify(collectData())); if (feedback) showFeedback('Session sauvegard√©e !'); } catch (e) { showFeedback('Erreur de sauvegarde (quota ?).', true); } };
    const loadFromLocalStorage = () => { const saved = localStorage.getItem(APP_STORAGE_KEY); if (saved) { renderData(JSON.parse(saved)); showFeedback('Session charg√©e !'); } else { showFeedback('Aucune session locale trouv√©e.', true); } };
    const exportToFile = () => { const data = collectData(); const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' }); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `${data.userName || 'atelier'}_session.json`; a.click(); URL.revokeObjectURL(a.href); };
    const handleFileImport = (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (event) => { try { renderData(JSON.parse(event.target.result)); showFeedback('Fichier import√© !'); } catch { showFeedback('Fichier invalide.', true); } }; reader.readAsText(file); e.target.value = ''; };
    const resetApplication = () => { if (confirm("Voulez-vous vraiment effacer toutes vos donn√©es ?")) { localStorage.removeItem(APP_STORAGE_KEY); localStorage.removeItem('workshopScoreHistory'); location.reload(); } };
    
    // NOUVEAU : Effacer historique
    function clearHistory() {
        if(confirm("Voulez-vous vraiment effacer l'historique des scores ?")) {
            const data = collectData(); 
            data.scoreHistory = []; 
            localStorage.setItem('workshopScoreHistory', '[]'); 
            localStorage.setItem(APP_STORAGE_KEY, JSON.stringify(data)); 
            renderData(data); 
            showFeedback("Historique effac√©.");
        }
    }

    function updateSliderValue(slider) { const valueSpan = document.getElementById(slider.id.replace('Slider', 'Value')); if (valueSpan) valueSpan.textContent = slider.value; }
    
    // --- Photo Logic ---
    function renderSelectedPhotos() { 
        if (!photoSelectionContainer) return; 
        photoSelectionContainer.innerHTML = ''; 
        if (!selectedPhotos.length) { 
            photoSelectionContainer.innerHTML = `<div id="emptySelectionMsg" style="grid-column: 1/-1; text-align: center; color: var(--text-muted);">Aucune image s√©lectionn√©e pour le moment.</div>`; 
            return; 
        } 
        selectedPhotos.forEach(photo => { 
            const card = document.createElement('div'); 
            card.className = 'photo-card'; 
            card.innerHTML = `<img src="${photo.src}"><button class="delete-btn" data-id="${photo.id}">√ó</button><div class="photo-card-content"><textarea placeholder="Pourquoi cette image ?" data-id="${photo.id}">${photo.note || ''}</textarea></div>`; 
            photoSelectionContainer.appendChild(card); 
        }); 
        document.querySelectorAll('.photo-card .delete-btn').forEach(b => b.addEventListener('click', e => removePhoto(e.target.dataset.id))); 
        document.querySelectorAll('.photo-card textarea').forEach(t => t.addEventListener('input', (e) => {
            const photo = selectedPhotos.find(p => p.id === e.target.dataset.id);
            if(photo) photo.note = e.target.value;
            scheduleSave();
        })); 
    }
    function addPhoto(src, note = "") { const id = `p${Date.now()}`; selectedPhotos.push({ id, src, note }); renderSelectedPhotos(); scheduleSave(); }
    function removePhoto(id) { selectedPhotos = selectedPhotos.filter(p => p.id !== id); renderSelectedPhotos(); scheduleSave(); }
    function handleFiles(files) { Array.from(files).forEach(file => { if (file.type.startsWith('image/')) { const reader = new FileReader(); reader.onload = e => addPhoto(e.target.result); reader.readAsDataURL(file); } }); }
    
    // --- Video Logic ---
    function extractYoutubeId(url) { const match = url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/); return (match && match[7].length == 11) ? match[7] : false; }
    function renderUserVideos() { 
        if (!userVideoContainer) return; 
        userVideoContainer.innerHTML = ''; 
        if (!selectedVideos.length) { 
            userVideoContainer.innerHTML = `<div id="emptyVideoMsg" style="grid-column: 1/-1; text-align: center; color: var(--text-muted);">Aucune vid√©o ajout√©e.</div>`; 
            return; 
        } 
        selectedVideos.forEach(video => { 
            const card = document.createElement('div'); 
            card.className = 'video-card'; 
            card.innerHTML = `<button class="delete-video-btn" data-id="${video.id}">√ó</button><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/${video.youtubeId}" allowfullscreen></iframe></div>`; 
            userVideoContainer.appendChild(card); 
        }); 
        document.querySelectorAll('.delete-video-btn').forEach(b => b.addEventListener('click', e => removeVideo(e.target.dataset.id))); 
    }
    function addVideo(youtubeId) { if (selectedVideos.some(v => v.youtubeId === youtubeId)) return; const id = `v${Date.now()}`; selectedVideos.push({ id, youtubeId }); renderUserVideos(); scheduleSave(); }
    function removeVideo(id) { selectedVideos = selectedVideos.filter(v => v.id !== id); renderUserVideos(); scheduleSave(); }
    function renderSuggestedVideos() { 
        if (!suggestedVideosList) return; 
        suggestedVideosList.innerHTML = ''; 
        suggestedVideosData.forEach(video => { 
            const item = document.createElement('div'); 
            item.className = 'suggested-video-item'; 
            item.innerHTML = `<img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${video.title}"><p>${video.title}</p>`; 
            item.addEventListener('click', () => addVideo(video.id)); 
            suggestedVideosList.appendChild(item); 
        }); 
    }
    
    // --- Star Practice Logic ---
    function addStarPracticeRow(beforeText = '', afterText = '') { 
        starRowCounter++; 
        const row = document.createElement('div'); 
        row.className = 'star-practice-row'; 
        row.innerHTML = `<div class="input-group"><label>Avant :</label><textarea class="star-before">${beforeText}</textarea></div><div class="input-group"><label>Apr√®s :</label><textarea class="star-after">${afterText}</textarea></div><button class="delete-row-btn" aria-label="Supprimer"><i class="fas fa-trash"></i></button>`; 
        starPracticeRowsContainer.appendChild(row); 
        row.querySelector('textarea.star-before').addEventListener('input', scheduleSave); 
        row.querySelector('textarea.star-after').addEventListener('input', scheduleSave); 
    }
    
    // --- Charts & Scoring Logic (MODIFIED FOR REQUEST) ---
    function getSliderValues() { return Array.from(allSliders).map(s => parseInt(s.value)); }
    function initializeChart() { 
        const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]'); 
        const labels = ['Confiance', 'R√©silience', 'Valorisation', 'Storytelling', 'CV', 'R√©seau']; 
        const currentData = getSliderValues();
        const datasets = [{ label: 'Mon Profil Actuel', data: currentData, fill: true, backgroundColor: 'rgba(0, 86, 179, 0.2)', borderColor: 'rgb(0, 86, 179)', pointBackgroundColor: 'rgb(0, 86, 179)' }]; 
        if (history.length > 0) datasets.push({ label: `Dernier enregistrement`, data: Object.values(history[history.length - 1].scores), fill: false, borderColor: 'rgba(100, 100, 100, 0.5)', borderDash: [5, 5] }); 
        
        if (myScoreChart) myScoreChart.destroy(); 
        const ctx = document.getElementById('scoreChart'); 
        if (!ctx) return; 
        myScoreChart = new Chart(ctx, { type: 'radar', data: { labels, datasets }, options: { scales: { r: { beginAtZero: true, max: 10, min: 0, ticks: { stepSize: 1 } } }, responsive: true, maintainAspectRatio: false } }); 
    }
    
    function initializeHistoryChart() { 
        const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]'); 
        const ctx = document.getElementById('historyChart'); 
        
        // --- LOGIC TO DISPLAY AVERAGE SCORES NEXT TO DATE ---
        const historyContainer = document.getElementById('snapshotHistory');
        if (history.length > 0) {
            const listHtml = history.map((snapshot) => {
                const dateStr = new Date(snapshot.date).toLocaleString('fr-FR');
                // Calculate average
                const scores = Object.values(snapshot.scores).map(Number);
                const average = (scores.reduce((a, b) => a + b, 0) / scores.length).toFixed(1);
                
                // Determine color
                let colorClass = 'score-low';
                if(average >= 7.5) colorClass = 'score-high';
                else if(average >= 5) colorClass = 'score-mid';

                return `<div class="history-row">
                            <span class="history-date"><i class="far fa-calendar-alt"></i> ${dateStr}</span>
                            <span class="history-score ${colorClass}">Moyenne : ${average}/10</span>
                        </div>`;
            }).join('');
            historyContainer.innerHTML = listHtml;
        } else {
            historyContainer.innerHTML = '<em style="color:#777; display:block; padding:15px; text-align:center;">Aucun enregistrement pour le moment.</em>'; 
        }
        
        if (!ctx) return;
        if (!history.length) { if (historyChart) historyChart.destroy(); return; } 
        
        const labels = ['Confiance', 'R√©silience', 'Valorisation', 'Storytelling', 'CV', 'R√©seau']; 
        const datasets = history.map((s, i) => ({ label: new Date(s.date).toLocaleString('fr-FR'), data: Object.values(s.scores), fill: true, backgroundColor: `hsla(${(i*137.5)%360}, 70%, 60%, 0.1)`, borderColor: `hsla(${(i*137.5)%360}, 70%, 45%, 1)` })); 
        
        if (historyChart) historyChart.destroy(); 
        historyChart = new Chart(ctx, { type: 'radar', data: { labels, datasets }, options: { scales: { r: { beginAtZero: true, max: 10, min: 0, ticks: { stepSize: 1 } } }, responsive: true, maintainAspectRatio: false } }); 
    }
    
    function saveScoreSnapshot() { 
        const history = JSON.parse(localStorage.getItem('workshopScoreHistory') || '[]'); 
        const scores = {}; 
        allSliders.forEach(s => scores[s.id.replace('Slider', '')] = s.value); 
        history.push({ date: new Date().toISOString(), scores }); 
        localStorage.setItem('workshopScoreHistory', JSON.stringify(history)); 
        showFeedback("Diagnostic enregistr√© !"); 
        initializeChart(); initializeHistoryChart(); scheduleSave(); 
    }
    
    // --- Name Handling ---
    function checkName() {
        const data = JSON.parse(localStorage.getItem(APP_STORAGE_KEY) || '{}');
        if (data.userName) { topUserPrenomInput.value = data.userName; personalizeContent(data.userName); } 
        else { nameModal.classList.add('visible'); }
    }
    function handleNameSubmission() {
        const userName = userNameInput.value.trim();
        if (userName) { topUserPrenomInput.value = userName; personalizeContent(userName); scheduleSave(); nameModal.classList.remove('visible'); } 
        else { alert("Veuillez entrer un pr√©nom."); }
    }
    
    // --- CONFETTI FUNCTION ---
    function fireConfetti() {
        if (typeof confetti === 'function') {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        }
    }
    
    // --- EVENTS ---
    submitNameBtn.addEventListener('click', handleNameSubmission);
    userNameInput.addEventListener('keyup', e => { if (e.key === 'Enter') handleNameSubmission(); });
    themeToggleBtn.addEventListener('click', () => { const isDark = document.body.classList.toggle('dark-mode'); localStorage.setItem('theme', isDark ? 'dark' : 'light'); setDarkTheme(isDark); });
    
    navDropdownBtn.addEventListener('click', e => { e.stopPropagation(); navDropdownContent.classList.toggle('show'); });
    document.addEventListener('click', () => { if (navDropdownContent.classList.contains('show')) navDropdownContent.classList.remove('show'); });
    document.querySelectorAll('#nav-center a, #nav-dropdown-content a').forEach(link => link.addEventListener('click', handleNavLinkClick));
    window.addEventListener('scroll', updateNavHighlight);
    
    saveDataButton.addEventListener('click', () => saveToLocalStorage(true));
    loadDataButton.addEventListener('click', loadFromLocalStorage);
    exportDataButton.addEventListener('click', exportToFile);
    importDataButton.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', handleFileImport);
    resetAppButton.addEventListener('click', resetApplication);
    clearHistoryBtn.addEventListener('click', clearHistory);
    
    document.querySelectorAll('textarea, input:not([type="file"])').forEach(el => el.addEventListener('input', scheduleSave));
    topUserPrenomInput.addEventListener('input', () => { personalizeContent(topUserPrenomInput.value.trim()); scheduleSave(); });
    
    modules.forEach(module => module.querySelector('.accordion-header')?.addEventListener('click', () => toggleAccordion(module)));
    
    allSliders.forEach(slider => { 
        slider.addEventListener('input', () => { 
            updateSliderValue(slider); 
            if (myScoreChart) { myScoreChart.data.datasets[0].data = getSliderValues(); myScoreChart.update(); } 
        }); 
    });
    
    saveSnapshotBtn.addEventListener('click', saveScoreSnapshot);
    
    if (photoDropZone) { 
        photoDropZone.addEventListener('click', () => photoUploadInput.click()); 
        photoDropZone.addEventListener('dragover', e => { e.preventDefault(); photoDropZone.classList.add('drag-over'); }); 
        photoDropZone.addEventListener('dragleave', () => photoDropZone.classList.remove('drag-over')); 
        photoDropZone.addEventListener('drop', e => { e.preventDefault(); photoDropZone.classList.remove('drag-over'); if (e.dataTransfer.files.length) handleFiles(e.dataTransfer.files); }); 
    }
    photoUploadInput.addEventListener('change', () => { if (photoUploadInput.files.length) handleFiles(photoUploadInput.files); });
    document.querySelectorAll('.suggested-photo').forEach(img => img.addEventListener('click', () => addPhoto(img.src)));
    
    addVideoBtn.addEventListener('click', () => { const id = extractYoutubeId(videoUrlInput.value); if(id) { addVideo(id); videoUrlInput.value = ''; } else alert("Lien YouTube invalide."); });
    
    addStarRowBtn.addEventListener('click', () => { addStarPracticeRow(); scheduleSave(); });
    starPracticeRowsContainer.addEventListener('click', e => { if (e.target.classList.contains('delete-row-btn') || e.target.parentElement.classList.contains('delete-row-btn')) { e.target.closest('.star-practice-row')?.remove(); scheduleSave(); } });
    
    // --- LOGIC PROMPTS & INTERACTIVITY ---

    // 1. Practice Response Prompt
    generatePracticeResponseBtn.addEventListener('click', () => {
        const userDraft = document.getElementById('practiceResponse').value.trim();
        const promptText = `*** INSTRUCTION POUR GEMINI ***

CONTEXTE :
Tu es un coach carri√®re expert, sp√©cialis√© dans l'accompagnement des cadres et seniors (50 ans et plus). Tu es bienveillant, strat√©gique et tr√®s orient√© "psychologie du recrutement".
Ton client est en simulation d'entretien. 
La question pos√©e par le recruteur est : "Votre dernier poste remonte √† plus d'un an, pourquoi cette longue p√©riode d'inactivit√© ?"

DONN√âES DU CANDIDAT (Ebauche de r√©ponse) :
"${userDraft || "[Le candidat n'a pas encore formul√© de r√©ponse pr√©cise, propose-lui des options standards]"}"

TA MISSION :
1. Analyse bri√®vement l'√©bauche du candidat (si fournie) : est-elle d√©fensive ? positive ? trop vague ?
2. R√©dige 3 VARIANTES de r√©ponses mod√®les parfaites que le candidat pourrait utiliser, en adoptant un ton professionnel, serein et dynamique.
   - Option A : L'approche "Formation et Mont√©e en comp√©tences" (focus sur ce qu'il a appris).
   - Option B : L'approche "Projet Personnel / B√©n√©volat" (focus sur l'activit√© continue).
   - Option C : L'approche "Pause Strat√©gique et Recherche cibl√©e" (focus sur la s√©lectivit√© et la motivation pour CE poste pr√©cis).

CONTRAINTES :
- Chaque r√©ponse doit transformer le "vide" en "plein".
- Ne jamais s'excuser d'√™tre au ch√¥mage.
- Utiliser un langage positif (√©viter "ch√¥mage", "gal√®re", pr√©f√©rer "p√©riode de transition", "consacr√© √†...").
- Terminer chaque r√©ponse par une phrase de transition qui ram√®ne la conversation sur le poste actuel (ex: "C'est pourquoi aujourd'hui, je suis pleinement disponible et op√©rationnel pour...").`;

        document.getElementById('practiceResponsePrompt').innerText = promptText;
        document.getElementById('practiceResponseResultContainer').style.display = 'block';
    });

    // 2. STAR Generator
    generateStarBtn.addEventListener('click', () => {
        const s = document.getElementById('starS').value.trim();
        const t = document.getElementById('starT').value.trim();
        const a = document.getElementById('starA').value.trim();
        const r = document.getElementById('starR').value.trim();

        if (!s && !t && !a && !r) {
            alert("Remplissez au moins quelques champs pour g√©n√©rer une phrase.");
            return;
        }

        let cvBullet = "";
        if (a) cvBullet += `<strong>${a.charAt(0).toUpperCase() + a.slice(1)}</strong>`;
        if (t) cvBullet += ` pour ${t}`;
        if (s) cvBullet += ` (contexte : ${s})`;
        if (r) cvBullet += `. R√©sultat : <strong>${r}</strong>.`;

        let story = "";
        story += `¬´ Dans un contexte de ${s || '...'}, o√π l'objectif √©tait de ${t || '...'}, j'ai ${a ? a.charAt(0).toLowerCase() + a.slice(1) : '...'}, ce qui a permis ${r ? r.charAt(0).toLowerCase() + r.slice(1) : '...'} ¬ª`;

        starOutput.innerHTML = `
            <div style="margin-bottom: 15px;">
                <strong>üìù Pour votre CV (Style Bullet Point) :</strong><br>
                ${cvBullet || "<em>Compl√©tez les champs pour voir le r√©sultat.</em>"}
            </div>
            <div>
                <strong>üó£Ô∏è Pour votre Entretien (Style Storytelling) :</strong><br>
                <em>${story}</em>
            </div>
        `;
        starResult.style.display = 'block';
    });
    
    if(copyStarBtn) {
        copyStarBtn.addEventListener('click', () => {
             // Use textContent to strip HTML
             const textToCopy = starOutput.innerText;
             navigator.clipboard.writeText(textToCopy).then(() => {
                 const originalText = copyStarBtn.textContent;
                 copyStarBtn.textContent = "‚úÖ Copi√© !";
                 setTimeout(() => copyStarBtn.textContent = originalText, 2000);
             });
        });
    }

    // 3. CV Analysis Prompt
    analyzeCvBtn.addEventListener('click', () => {
        const cvText = document.getElementById('cvInputArea').value.trim();
        if (!cvText) { alert("Veuillez coller le texte de votre CV d'abord."); return; }

        const promptText = `*** INSTRUCTION POUR GEMINI : AUDIT EXPERT DE CV SENIOR ***

R√îLE :
Agis comme un Directeur des Ressources Humaines (DRH) exp√©riment√© et expert en "Personal Branding" pour les profils seniors. Tu connais parfaitement les attentes des recruteurs et le fonctionnement des logiciels de tri de CV (ATS).

CONTEXTE :
Voici le texte brut du CV d'un candidat senior :
----- D√âBUT DU CV -----
${cvText}
----- FIN DU CV -----

TA MISSION (EXHAUSTIVE) :
R√©alise un audit complet et sans concession de ce CV, structur√© exactement comme suit :

1. üìä ANALYSE MACRO & PREMI√àRE IMPRESSION
   - Quels sont les 3 points forts imm√©diats ?
   - Quels sont les 3 "red flags" (points bloquants) majeurs (ex: dates floues, trop de d√©tails, jargon obsol√®te) ?
   - Score estim√© de compatibilit√© ATS (sur 10) avec justification.

2. ‚úçÔ∏è R√â√âCRITURE CIBL√âE (M√âTHODE STAR)
   Choisis les 2 exp√©riences professionnelles les plus significatives du CV et r√©√©cris-les compl√®tement en rempla√ßant les listes de t√¢ches par des accomplissements chiffr√©s.
   - Exemple : Au lieu de "Gestion des ventes", √©cris "Pilotage d'une force de vente de 10 personnes, g√©n√©rant +15% de CA sur 2023".
   *Si le CV manque de chiffres, INVENTE des m√©triques r√©alistes entre parenth√®ses pour montrer au candidat le type de donn√©es attendues.*

3. üß† SECTION "PROFIL / R√âSUM√â"
   R√©dige une proposition de paragraphe d'introduction (Profil) de 4-5 lignes. Ce texte doit √™tre percutant, r√©sumer l'expertise (pas juste les ann√©es d'exp√©rience) et contenir les mots-cl√©s strat√©giques du secteur pr√©sum√©.

4. üõ°Ô∏è STRAT√âGIE "SENIOR"
   Identifie tout √©l√©ment dans le CV qui pourrait inconsciemment activer des biais √¢gistes (ex: mentionner l'ann√©e du Bac si elle est lointaine, utiliser des termes technologiques d√©suets, adresse mail type 'wanadoo'). Propose une correction pour chaque point.

FORMAT DE SORTIE : Markdown structur√©, ton professionnel, encourageant mais direct.`;

        document.getElementById('cvAnalysisPrompt').innerText = promptText;
        document.getElementById('cvAnalysisResultContainer').style.display = 'block';
    });

    // 4. Training Plan Prompt
    generateTrainingPlanBtn.addEventListener('click', () => {
        const focus = document.getElementById('trainingFocus').value.trim();
        if (!focus) { alert("Veuillez indiquer un sujet."); return; }

        const promptText = `*** INSTRUCTION POUR GEMINI : ING√âNIERIE P√âDAGOGIQUE ***

R√îLE :
Tu es un Ing√©nieur P√©dagogique Expert sp√©cialis√© dans la formation continue des adultes (Andragogie) et la reconversion professionnelle.

DEMANDE DU CANDIDAT :
"Je souhaite me former et monter en comp√©tence sur le sujet suivant : ${focus}"

TA MISSION :
Construis un Plan de Formation Autonome intensif sur 4 semaines, con√ßu pour un professionnel exp√©riment√© qui veut aller droit au but.

LIVRABLE ATTENDU (Tableau Markdown) :

1. üéØ OBJECTIF P√âDAGOGIQUE GLOBAL
   D√©finis en une phrase ce que l'apprenant saura FAIRE √† la fin (comp√©tence op√©rationnelle).

2. üìö RESSOURCES RECOMMAND√âES (Sourcing pr√©cis)
   - Sugg√®re 3 cha√Ænes YouTube sp√©cifiques ou vid√©os pr√©cises (titres exacts si possible).
   - Sugg√®re 1 MOOC ou cours en ligne gratuit (Coursera, OpenClassrooms, LinkedIn Learning...).
   - Sugg√®re 1 livre ou article de r√©f√©rence incontournable.

3. üìÖ PROGRAMME HEBDOMADAIRE (4 Semaines)
   - Semaine 1 (Fondamentaux) : Quoi lire/voir ? Quel petit exercice faire ?
   - Semaine 2 (Approfondissement) : Pratique technique.
   - Semaine 3 (Mise en situation) : R√©alisation d'un mini-projet concret (d√©cris le projet).
   - Semaine 4 (Valorisation) : Comment "vendre" cette nouvelle comp√©tence sur LinkedIn et le CV (propose la phrase exacte √† ajouter au CV).

4. ‚úÖ TEST DE VALIDATION
   Liste 3 questions techniques ou 1 exercice pratique que le candidat doit r√©ussir pour s'auto-valider.`;

        document.getElementById('trainingPlanPrompt').innerText = promptText;
        document.getElementById('trainingPlanResultContainer').style.display = 'block';
    });

    // 5. Final Coaching Prompt
    generatePromptBtn.addEventListener('click', () => {
        const userName = topUserPrenomInput.value.trim() || 'Professionnel Senior';
        
        const skillMap = {
            confidence: "Ma confiance en ma capacit√© √† retrouver un emploi",
            resilience: "Ma r√©silience face aux refus",
            value: "Ma clart√© sur ma valeur ajout√©e unique",
            storytelling: "Ma capacit√© √† raconter mes r√©ussites (Storytelling)",
            cv: "La qualit√© et l'impact de mon CV",
            network: "Mon utilisation du R√©seau"
        };
        
        const scores = Array.from(allSliders).map(s => ({
            id: s.id.replace('Slider', ''),
            text: skillMap[s.id.replace('Slider', '')],
            score: parseInt(s.value, 10)
        }));

        scores.sort((a, b) => a.score - b.score);
        const weakPoints = scores.slice(0, 2);

        const promptText = `*** INSTRUCTION POUR GEMINI : COACHING CARRI√àRE STRAT√âGIQUE ***

R√îLE : 
Tu es un Coach de Carri√®re Ex√©cutif de haut niveau. Tu ne donnes pas des conseils g√©n√©riques ("refais ton CV"), tu fournis des strat√©gies psychologiques et tactiques pr√©cises.

PROFIL DU CLIENT :
Nom : ${userName}
Profil : Professionnel Senior (50 ans +)
Points de douleur majeurs identifi√©s (auto-√©valuation faible) :
1. ${weakPoints[0].text} (Note: ${weakPoints[0].score}/10)
2. ${weakPoints[1].text} (Note: ${weakPoints[1].score}/10)

TA MISSION :
√âlabore une "Feuille de Route de Transformation" sur 30 jours pour r√©soudre sp√©cifiquement ces 2 points faibles.

STRUCTURE DE LA R√âPONSE ATTENDUE :

PARTIE 1 : LE DIAGNOSTIC PSYCHOLOGIQUE (Analyse √† froid)
Explique au client pourquoi il ressent cette faiblesse sur ces points pr√©cis (m√©canismes classiques chez les seniors : syndrome de l'imposteur, internalisation des st√©r√©otypes, isolement...). Sois empathique mais analytique.

PARTIE 2 : LE PLAN D'ATTAQUE (Actions contre-intuitives)
Pour chaque point faible, propose 2 actions "Choc".
*Exemple : Si le r√©seau est faible, ne pas dire "contactez des gens", mais "Identifiez 3 anciens coll√®gues perdus de vue et envoyez-leur ce message pr√©cis : [Script]..."*

PARTIE 3 : SCRIPTS ET TEMPLATES (Outils pr√™ts √† l'emploi)
R√©dige pour moi :
- Un "Mantra" ou une affirmation √† me r√©p√©ter chaque matin pour booster la confiance.
- Un script de r√©ponse √† une objection li√©e √† mon √¢ge.
- Un mod√®le de message LinkedIn audacieux pour approcher un d√©cideur.

PARTIE 4 : KPI (Indicateurs de succ√®s)
Comment saurai-je dans 30 jours que j'ai r√©ussi ? Donne-moi 3 crit√®res mesurables.

TON :
Coach sportif de haut niveau : exigeant, pr√©cis, √©nergisant. Pas de jargon corporate vide.`;

        document.getElementById('finalPrompt').innerText = promptText;
        document.getElementById('promptResultContainer').style.display = 'block';
        fireConfetti(); // Trigger Confetti
    });

    const copyFinalPromptBtn = document.getElementById('copyPromptBtn');
    const launchFinalGeminiBtn = document.getElementById('launchGeminiBtn');
    if (copyFinalPromptBtn) copyFinalPromptBtn.addEventListener('click', () => window.copyToClipboard('finalPrompt'));
    if (launchFinalGeminiBtn) launchFinalGeminiBtn.addEventListener('click', window.openGemini);

    // --- Lancement ---
    populateNav();
    populateDropdown();
    setDarkTheme(localStorage.getItem('theme') === 'dark');
    loadFromLocalStorage();
    if (!localStorage.getItem(APP_STORAGE_KEY)) { addStarPracticeRow(); initializeChart(); initializeHistoryChart(); }
    renderSuggestedVideos();
    checkName();
    updateNavHighlight();
});
</script>

</body>
</html>
